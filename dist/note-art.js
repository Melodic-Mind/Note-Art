!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("note-art",[],e):"object"==typeof exports?exports["note-art"]=e():t["note-art"]=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=10)}([function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return i}));var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,o=[{key:"getPitchClassSet",value:function(e){return"#"===e?t.sharpClassNotes:"b"===e?t.flatClassNotes:null}}],(n=null)&&r(e.prototype,n),o&&r(e,o),t}();o(i,"sharpClassNotes",["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]),o(i,"flatClassNotes",["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"]),o(i,"pitchClassLetters",["C","D","E","F","G","A","B"]),o(i,"pitchClasses",["C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"]),o(i,"intervals",{U:0,m2:1,M2:2,m3:3,M3:4,P4:5,aug4:6,dim5:6,P5:7,m6:8,M6:9,m7:10,M7:11,P8:12}),o(i,"noteDurations",{"1n":64,"2n":32,"2n.":48,"2t":21,"4n":16,"8n":8,"16n":4,"32n":2,"64n":1})},function(t,e,n){"use strict";var r=n(0);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"validate",value:function(t){return Object.keys(r.a.noteDurations).includes(t)}}],(n=null)&&o(e.prototype,n),i&&o(e,i),t}(),a=n(4);function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"isPattern",value:function(e){if(t.isArray(e),!e.every((function(t){return parseInt(t)==t})))throw new a.a("_ should be an array where each member is an integer.");return!0}},{key:"isArray",value:function(t){if(!Array.isArray(t))throw new a.a("expected _ to be an array")}}],(n=null)&&u(e.prototype,n),r&&u(e,r),t}(),s=n(5);function f(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,o=[{key:"exists",value:function(e){var n=l(e,2),r=n[0],o=n[1];if(!t.validLetters.includes(r))return!1;switch(o){case"b":if(!f(e).slice(2).every((function(t){return"b"===t})))return!1;break;case"x":if(!f(e).slice(2,e.length-1).every((function(t){return"x"===t})))return!1;if(!["x","#"].includes(e[e.length-1]))return!1;break;case"#":if(e.length>2)return!1}return!0}},{key:"isPitchClass",value:function(t){if(!s.PitchClass.isPitchClass(t))throw new a.a("expected ".concat(t," to be an instance of PitchClass"));return!0}},{key:"validLetters",get:function(){return r.a.pitchClassLetters.concat(r.a.pitchClassLetters.map((function(t){return t.toLowerCase()})))}}],(n=null)&&h(e.prototype,n),o&&h(e,o),t}(),d=n(2);function y(t){if(!Array.isArray(t))throw new a.a("expected ".concat(t," to be an array"));return!0}function b(t,e){if(!(t instanceof e))throw new a.a("expected ".concat(t," to be an instance of ").concat(e.name));return!0}function v(t){if("number"!=typeof t)throw new a.a("expected ".concat(t," to be a number"));return!0}function g(t){if(!Object(d.k)(t))throw new a.a("Expected ".concat(t," to be a string representing a note"));return!0}function m(t){y(t),t.forEach((function(t){return b(t,s.PitchClass)}))}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return p})),n.d(e,"d",(function(){return y})),n.d(e,"e",(function(){return b})),n.d(e,"f",(function(){return v})),n.d(e,"h",(function(){return g})),n.d(e,"g",(function(){return m}))},function(t,e,n){"use strict";var r=n(7),o=n(0),i=n(5),a=n(1),u=n(6);function c(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(t,e){var n=t.classIndex,r=e.classIndex;return n-r<=0?Math.abs(n-r):12-(n-r)}function f(t){return Object(a.h)(t),{pitchClass:Object(r.a)(t.slice(0,t.length-1)),octave:parseInt(t[t.length-1])}}function l(t){return["r","R"].includes(t)}function h(t){if("string"!=typeof t)return!1;if(l(t))return!0;var e=Object(r.a)(t.slice(0,t.length-1)),n=parseInt(t[t.length-1]);return!(!a.c.exists(e)||"number"!=typeof n)}function p(t,e){return Object(a.h)(t),l(t)?t:i.Note.builder(t).interval(e).toString()}function d(t,e){for(var n,r=f(t),i=r.pitchClass,a=r.octave,u={},c=0;c<=e;++c)u[(n=o.a.flatClassNotes[(o.a.flatClassNotes.indexOf(i)+c)%12])+a]={pitchClass:n,octave:a},"B"===n&&a++;return u}function y(t,e){}function b(){}function v(t){var e=Object(r.f)(o.a.pitchClassLetters,o.a.pitchClassLetters.indexOf(t.root.pitchClass[0])),n=[t.root.pitchClass];return c(t.pitchClasses).slice(1).forEach((function(t,r){n.push(u.a.enharmonicPitchClass(t,new i.PitchClass(e[r+1])))})),n}function g(t){return t[t.length-1]}function m(t){return t.slice(0,t.length-1)}var w=n(3);function O(t){var e=t.octave-w.b.octave;return Math.pow(w.c,t.classIndex-o.a.flatClassNotes.indexOf(w.b.pitchClass)+e*w.a)*w.b.frequency}function j(t){return Math.round(w.b.midi+w.a*Math.log2(t/w.b.frequency))}function C(t){return w.b.frequency*Math.pow(2,(t-w.b.midi)/w.a)}var k=n(8);n.d(e,"f",(function(){return r.a})),n.d(e,"x",(function(){return r.h})),n.d(e,"v",(function(){return r.g})),n.d(e,"t",(function(){return r.f})),n.d(e,"n",(function(){return r.d})),n.d(e,"s",(function(){return r.e})),n.d(e,"g",(function(){return r.b})),n.d(e,"m",(function(){return r.c})),n.d(e,"c",(function(){return s})),n.d(e,"q",(function(){return f})),n.d(e,"l",(function(){return l})),n.d(e,"k",(function(){return h})),n.d(e,"w",(function(){return p})),n.d(e,"r",(function(){return d})),n.d(e,"j",(function(){return y})),n.d(e,"p",(function(){return b})),n.d(e,"u",(function(){return v})),n.d(e,"d",(function(){return g})),n.d(e,"e",(function(){return m})),n.d(e,"h",(function(){return O})),n.d(e,"i",(function(){return j})),n.d(e,"o",(function(){return C})),n.d(e,"a",(function(){return u.a})),n.d(e,"b",(function(){return k.a}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return i}));var r={pitchClass:"A",octave:4,midi:69,frequency:440},o=12,i=Math.pow(2,1/12)},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function i(t){var e="function"==typeof Map?new Map:void 0;return(i=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return u(t,arguments,s(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c(r,t)})(t)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function u(t,e,n){return(u=a()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&c(o,n.prototype),o}).apply(null,arguments)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",(function(){return f}));var f=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,s(e).call(this,"Invalid input: ".concat(t,".")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),e}(i(Error))},function(t,e,n){"use strict";n.r(e);var r=n(2),o=n(1),i=n(0),a=n(4),u=n(6),c=n(8),s=n(3);function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var h=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.attributes={},!o.c.exists(e))throw new a.a("".concat(e," should be a pitch class."));this.attributes.raw=Object(r.f)(e),this.attributes.classSet=e.includes("#")?"#":"b",this.attributes.pitchClass=u.a.transformPitchClass(this),this.attributes.classIndex=i.a.getPitchClassSet(this.classSet).indexOf(this.pitchClass)}var e,n,h;return e=t,h=[{key:"isFlat",value:function(t){return t.includes("b")}},{key:"isSharp",value:function(t){return["#","x"].includes(t[1])}},{key:"isPitchClass",value:function(e){return e instanceof t}}],(n=[{key:"interval",value:function(e){if("number"==typeof e){var n=e%s.a;if(i.a.pitchClasses.includes(this.raw)){var r=Math.abs((this.classIndex+s.a+n)%s.a);return new t(i.a.getPitchClassSet(this.classSet)[r])}var o=i.a.getPitchClassSet(this.classSet).indexOf(this.raw[0]),u=Math.abs((o+s.a+n)%s.a),l=f(i.a.getPitchClassSet(this.classSet)[u],2),h=l[0],p=l[1],d=this.raw.slice(1);if("b"===p&&!d.includes("b")){var y=i.a.flatClassNotes[(i.a.flatClassNotes.indexOf("".concat(h).concat(p))-1)%12],b=f(c.a.enharmonicPitchClass("".concat(h).concat(p),y),2);h=b[0],p=b[1]}return"#"===d[d.length-1]&&p?new t("".concat(h).concat(d.slice(0,d.length-1),"x")):new t("".concat(h).concat(d).concat(p||""))}throw new a.a("".concat(e," is not a valid interval"))}},{key:"toString",value:function(){return this.raw}},{key:"pitchClass",get:function(){return this.attributes.pitchClass}},{key:"classSet",get:function(){return this.attributes.classSet}},{key:"classIndex",get:function(){return this.attributes.classIndex}},{key:"raw",get:function(){return this.attributes.raw}}])&&l(e.prototype,n),h&&l(e,h),t}();function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(t,e,n){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var m=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=y(this,v(e).call(this,t)),Object(o.f)(n),r.attributes.octave=n,r}var n,a,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(e,t),n=e,u=[{key:"builder",value:function(t){var n=Object(r.q)(t);return new e(n.pitchClass,n.octave)}},{key:"fromFrequency",value:function(t){var n=Object(r.i)(t);return new e(i.a.sharpClassNotes[n%12],Math.floor(n/12-1))}}],(a=[{key:"interval",value:function(t){var n=b(v(e.prototype),"interval",this).call(this,t).pitchClass,r=Math.floor((this.classIndex+t)/12);return t<0&&(r=this.classIndex+t<0?r:0),new e(n,this.octave+r)}},{key:"transpose",value:function(t){return this.interval(t)}},{key:"toString",value:function(){return"".concat(b(v(e.prototype),"toString",this).call(this)).concat(this.octave)}},{key:"octave",get:function(){return this.attributes.octave}}])&&d(n.prototype,a),u&&d(n,u),e}(h);function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){j(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function j(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var P=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};C(this,t),o.c.isPitchClass(e),o.b.isPattern(n),this.attributes={},this.setPitchClasses(e,n),this.attributes.info=O({},r,{pattern:n})}var e,n,r;return e=t,(n=[{key:"setPitchClasses",value:function(t,e){var n=[t];e.forEach((function(e){return n.push(t.interval(e))})),this.attributes.pitchClasses=n}},{key:"toString",value:function(){return this.pitchClasses.map((function(t){return t.toString()})).join(", ")}},{key:"transpose",value:function(e){return new t(this.root.interval(e),this.pattern,this.info)}},{key:"pitchClasses",get:function(){return this.attributes.pitchClasses}},{key:"root",get:function(){return this.pitchClasses[0]}},{key:"info",get:function(){return this.attributes.info}},{key:"pattern",get:function(){return this.info.pattern}},{key:"raw",get:function(){return this.pitchClasses.map((function(t){return t.raw}))}}])&&k(e.prototype,n),r&&k(e,r),t}(),S=n(7);function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function M(t,e){return!e||"object"!==x(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A(t,e){return(A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _=function(t){function e(){return E(this,e),M(this,N(e).apply(this,arguments))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A(t,e)}(e,t),n=e,(r=[{key:"inversion",value:function(t){if(t>0&&t<=this.pitchClasses.length)return Object(S.f)(this.pitchClasses,t);throw new a.a("inversion cant be bigger then the number of pitch classes in the chord")}}])&&T(n.prototype,r),o&&T(n,o),e}(P);function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function F(t,e){return!e||"object"!==D(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function L(t,e,n){return(L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=q(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function G(t,e){return(G=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var B=function(t){function e(){return I(this,e),F(this,q(e).apply(this,arguments))}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&G(t,e)}(e,t),n=e,(o=[{key:"chords",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.pitchClasses.map((function(n,r){return t.chord(r+1,e?4:3)}))}},{key:"degree",value:function(t){return this.pitchClasses[t-1]}},{key:"chord",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=this.pitchClasses,o=this.degree(t),i=t-1,a=[],u=1;u<e;++u)a.push(Object(r.c)(o,n[(i+2*u)%n.length]));return new _(o,a)}},{key:"raw",get:function(){return 6===this.pattern.length?Object(r.u)(this):L(q(e.prototype),"raw",this)}}])&&R(n.prototype,o),i&&R(n,i),e}(P);function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var V=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o.b.isArray(e),this.attributes={pattern:e,pitchClass:n,name:r}}var e,n,i;return e=t,(n=[{key:"getChord",value:function(t){Object(o.e)(t,h);var e=Object(r.c)(this.pitchClass,t);return{pattern:this.pattern.map((function(t){return"x"===t?"x":t+e})),name:"".concat(t," ").concat(this.name)}}},{key:"pattern",get:function(){return this.attributes.pattern}},{key:"pitchClass",get:function(){return this.attributes.pitchClass}},{key:"name",get:function(){return this.attributes.name}}])&&z(e.prototype,n),i&&z(e,i),t}();n.d(e,"PitchClass",(function(){return h})),n.d(e,"Note",(function(){return m})),n.d(e,"MusicalPattern",(function(){return P})),n.d(e,"Chord",(function(){return _})),n.d(e,"Scale",(function(){return B})),n.d(e,"GuitarChordPattern",(function(){return V}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(5),o=n(2),i=n(1),a=n(0),u=n(3);function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,f;return e=t,f=[{key:"pitchClassesToNotes",value:function(t,e){return Object(i.g)(t),Object(i.f)(e),t.map((function(t){return new r.Note(t.pitchClass,e)}))}},{key:"pitchClassesToPianoChordNotes",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(i.g)(t),Object(i.f)(e),n&&(t=Object(o.t)(t,n));var a=e;return t.map((function(e,n){return n-1>=0&&e.classIndex<t[n-1].classIndex&&a++,new r.Note(e.pitchClass,a)}))}},{key:"enharmonicPitchClass",value:function(t,e){for(var n=Object(o.c)(t,e),r=n>=7?"#":"b",i=n>=7?12-n:n,a="",u=0;u<i;++u)a=a.concat(r);return"#"===r&&(a=Object(o.n)(a,"##","x")),"".concat(e.raw).concat(a)}},{key:"transformPitchClass",value:function(t){var e,n=c(t.raw,2),r=n[0];switch(n[1]){case"#":return["E","B"].includes(r)?a.a.sharpClassNotes[(a.a.sharpClassNotes.indexOf(r)+1)%12]:t.raw;case"x":return e=2*Object(o.s)(t.raw,"x"),"#"===t.raw[t.raw.length-1]&&++e,a.a.sharpClassNotes[(a.a.sharpClassNotes.indexOf(r)+e)%u.a];case"b":if(!["C","F"].includes(r)&&2===t.raw.length)return t.raw;e=Object(o.s)(t.raw,"b");var i=a.a.flatClassNotes.indexOf(r)-e,s=i>=0?i:u.a+i;return a.a.flatClassNotes[s%u.a];default:return r}}}],(n=null)&&s(e.prototype,n),f&&s(e,f),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"h",(function(){return c})),n.d(e,"g",(function(){return s})),n.d(e,"f",(function(){return f})),n.d(e,"d",(function(){return l})),n.d(e,"e",(function(){return h})),n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return d}));var r=n(4);function o(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(t){return function(t){if(Array.isArray(t))return t}(t)||a(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function u(t){return t.charAt(0).toUpperCase()+t.slice(1)}function c(t){return Number(Number.parseFloat(t).toFixed(2))}function s(t,e,n){var r=i(t).slice(0),o=r[e];return r[e]=r[n],r[n]=o,r}function f(t,e){for(var n=i(t).slice(0),r=[],a=0;a<e;)r.push(n.shift()),++a;return[].concat(o(n),r)}function l(t,e,n){for(;t.includes(e);)for(var r=t.length,o=0;o<r;++o)if(t.substr(o,e.length)===e){t="".concat(t.slice(0,o)).concat(n).concat(t.slice(o+e.length));break}return t}function h(t,e){return t.split(e).length-1}function p(t,e){for(var n=i(t).slice(0);n.length<e;)n=n.concat(o(n));return n.slice(0,e)}function d(t){if(!Array.isArray(t)||!t.every((function(t){return Array.isArray(t)})))throw new r.a("Expected ".concat(t," and each of it's elements to be an array"));return t.reduce((function(t,e){return t.length>e.length?t:e}),[])}},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(6),o=n(5);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){function e(){return a(this,e),c(this,f(e).apply(this,arguments))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,t),n=e,i=[{key:"pitchClassesToNotes",value:function(t,n){return s(f(e),"pitchClassesToNotes",this).call(this,t.map((function(t){return new o.PitchClass(t)})),n).map((function(t){return t.toString()}))}},{key:"pitchClassesToPianoChordNotes",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return s(f(e),"pitchClassesToPianoChordNotes",this).call(this,t.map((function(t){return new o.PitchClass(t)})),n,r).map((function(t){return t.toString()}))}},{key:"enharmonicPitchClass",value:function(t,n){return s(f(e),"enharmonicPitchClass",this).call(this,new o.PitchClass(t),new o.PitchClass(n))}}],(r=null)&&u(n.prototype,r),i&&u(n,i),e}(r.a)},function(t,e,n){"use strict";n.r(e);var r=n(2),o=n(0),i=n(1);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:64;a(this,t),this.attributes={maxDuration:e,duration:"4n",data:[{notes:new Set,duration:"4n"}]}}var e,n,c;return e=t,(n=[{key:"clone",value:function(){return this.transpose(0)}},{key:"durationLeft",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data.length;return this.maxDuration-this.data.slice(0,t).reduce((function(t,e){return e.notes.size?t+o.a.noteDurations[e.duration]:t+0}),0)}},{key:"initNext",value:function(t){this.durationLeft(this.data.length)>0&&(this.data[t]={notes:new Set,duration:this.duration})}},{key:"validateInsertion",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.duration;return!(t>this.data.length||o.a.noteDurations[e]>this.durationLeft(t)+e)}},{key:"addNote",value:function(t,e){var n=t.note,o=t.duration;return this.duration=o,Object(r.k)(n)&&(n=Object(r.f)(n)),!!this.validateInsertion(e+1)&&(this.data[e].notes.add(n),this.data[e].duration=this.duration,this.initNext(e+1),!0)}},{key:"addNotes",value:function(t,e){var n=this,r=t.notes,o=t.duration;return Object(i.d)(r),r.every((function(t){return n.addNote({note:t,duration:o},e)}))}},{key:"addChord",value:function(t,e){var n=t.notes,r=t.name,o=void 0===r?"?":r,i=t.duration;return!!this.validateInsertion(e+1,i)&&(this.data[e].name=o,this.addNotes({notes:n,duration:i},e))}},{key:"deleteNote",value:function(t,e){return this.data[e].notes.delete(Object(r.f)(t))}},{key:"deleteNotes",value:function(t,e){var n=this;return Object(i.d)(t),t.every((function(t){return n.deleteNote(t,e)}))}},{key:"deleteMember",value:function(t){return!!this.data[t]&&(this.data.splice(t,1),0!==this.data[this.data.length-1].notes.size&&this.initNext(this.data.length),!0)}},{key:"isFull",value:function(t){return!(o.a.noteDurations[t]<=this.durationLeft())}},{key:"transpose",value:function(e){var n=new t(this.maxDuration);return this.data.forEach((function(t,o){t.notes.forEach((function(i){n.addNote({note:Object(r.w)(i,e),duration:t.duration},o)}))})),n}},{key:"clear",value:function(){return this.data.length=0,this.initNext(0),!0}},{key:"data",get:function(){return this.attributes.data}},{key:"duration",get:function(){return this.attributes.duration},set:function(t){Object.keys(o.a.noteDurations).includes(t)&&(this.attributes.duration=t)}},{key:"maxDuration",get:function(){return this.attributes.maxDuration}},{key:"length",get:function(){return this.data.reduce((function(t,e){var n=e.duration;return t+o.a.noteDurations[n]}),0)/4}}])&&u(e.prototype,n),c&&u(e,c),t}(),s=n(7);function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.bpm,r=void 0===n?100:n,o=e.timeSignature,i=void 0===o?[4,4]:o,a=e.name,u=void 0===a?"my_score":a,c=e.numberOfVoices,s=void 0===c?1:c;f(this,t),this.setTimeSignature(i);for(var l=[],h=0;h<s;++h)l.push([]);this.attributes={name:u,bpm:r,duration:"4n",voices:l}}var e,n,r;return e=t,r=[{key:"getMeasureSize",value:function(t){if(!Array.isArray(t))throw new Error("time signature must be an array, e.g [4, 4]");return t[0]/t[1]*4*o.a.noteDurations["".concat(t[1],"n")]*t[1]/4}}],(n=[{key:"setTimeSignature",value:function(e){this.measureSize=t.getMeasureSize(e),this.timeSignature=e}},{key:"setMeasureDuration",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!!this.getMeasure(t,e)&&(this.getMeasure(t,e).duration=this.duration,!0)}},{key:"getVoice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return!!this.attributes.voices[t]&&this.attributes.voices[t]}},{key:"addVoice",value:function(t,e){this.voices.splice(t,0,e||[])}},{key:"deleteVoice",value:function(t){if(this.voices.length>1&&this.voices[t])return this.voices.splice(t,1);throw new Error("This score does not have a ${index} voice")}},{key:"getMeasure",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.voices[e][t]}},{key:"addMeasure",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;void 0===t&&(t=this.getVoice(n).length),e=r&&r instanceof c?r:new c(this.measureSize),this.getVoice(n).splice(t,0,e)}},{key:"addNote",value:function(t,e,n){var r=t.note,o=t.duration,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.addOperation("addNote",{note:r,duration:o},e,n,i)}},{key:"addNotes",value:function(t,e,n){var r=t.notes,o=t.duration,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.addOperation("addNotes",{notes:r,duration:o},e,n,i)}},{key:"addChord",value:function(t,e,n){var r=t.notes,o=t.name,i=t.duration,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.addOperation("addChord",{notes:r,name:o,duration:i},e,n,a)}},{key:"addOperation",value:function(t,e,n,r,o){var i=this.getMeasure(r,o);return!!i&&i[t](e,n)}},{key:"deleteNote",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.deleteOperation("deleteNote",t,e,n,r)}},{key:"deleteNotes",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.deleteOperation("deleteNotes",t,e,n,r)}},{key:"deleteOperation",value:function(t,e,n,r,o){return!!this.getMeasure(r,o)&&this.getMeasure(r,o)[t](e,n)}},{key:"deleteMember",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return!!this.getMeasure(e,n)&&this.getMeasure(e,n).deleteMember(t)}},{key:"clearMeasure",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!!this.getMeasure(t,e)&&this.getMeasure(t,e).clear()}},{key:"deleteMeasure",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!!this.getMeasure(t,e)&&this.voices[e].splice(t,1)}},{key:"cloneMeasure",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.getMeasure(t,e)){var n=this.getMeasure(t,e).clone();return this.voices[e].splice(t,0,n),!0}return!1}},{key:"transpose",value:function(t,e){this.voices[e]=this.voices[e].map((function(e){return e.transpose(t)}))}},{key:"duration",get:function(){return this.attributes.duration},set:function(t){i.a.validate(t),this.attributes.duration=t}},{key:"name",get:function(){return this.attributes.name},set:function(t){this.attributes.name=t}},{key:"bpm",get:function(){return this.attributes.bpm},set:function(t){"number"==typeof t&&(this.attributes.bpm=t)}},{key:"voices",get:function(){return this.attributes.voices}},{key:"length",get:function(){var t=Object(s.c)(this.voices);return t.length?"".concat(t.length-1,":0:").concat(t[t.length-1].length):0}}])&&l(e.prototype,n),r&&l(e,r),t}();function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var v=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"measureToObject",value:function(t){var e=this,n=t.data.map((function(t){return e.notesToObject(t)}));return{maxDuration:t.maxDuration,duration:t.duration,data:n}}},{key:"notesToObject",value:function(t){var e={notes:Array.from(t.notes),duration:t.duration};return t.name&&(e.name=t.name),e}},{key:"objectToMeasure",value:function(t){var e=new c(t.maxDuration);return e.duration=t.duration,t.data.forEach((function(t,n){t.name?e.addChord(d({},t),n):e.addNotes(d({},t),n)})),e}},{key:"scoreToObject",value:function(t){var e=this,n=t.voices.map((function(t){return t.map((function(t){return e.measureToObject(t)}))}));return{name:t.name,timeSignature:t.timeSignature,bpm:t.bpm,voices:n}}},{key:"objectToScore",value:function(t){var e=this,n=new h({timeSignature:t.timeSignature,bpm:t.bpm,name:t.name});return t.voices.forEach((function(t,r){r&&n.addVoice(r),t.forEach((function(t,o){n.addMeasure(o,r,e.objectToMeasure(t))}))})),n}},{key:"cloneScore",value:function(t){return this.objectToScore(this.scoreToObject(t))}}],(n=null)&&b(e.prototype,n),r&&b(e,r),t}();n.d(e,"Measure",(function(){return c})),n.d(e,"Score",(function(){return h})),n.d(e,"ScoreHandler",(function(){return v}))},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(e);var o=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.instances={}}var e,n,o;return e=t,(n=[{key:"get",value:function(t){return this.instances[t].called||(this.instances[t].called=!0,this.instances[t].value=this.instances[t].value()),this.instances[t].value}},{key:"set",value:function(t,e){this.instances[t]={called:!1,value:e}}}])&&r(e.prototype,n),o&&r(e,o),t}()),i=n(2),a=n(5),u=n(9),c=n(1),s=n(0);n.d(e,"firstToUpper",(function(){return i.f})),n.d(e,"twoDigitFormat",(function(){return i.x})),n.d(e,"switchMembers",(function(){return i.v})),n.d(e,"rearrangeArray",(function(){return i.t})),n.d(e,"mapString",(function(){return i.n})),n.d(e,"occurrencesInString",(function(){return i.s})),n.d(e,"fitArrayToSize",(function(){return i.g})),n.d(e,"longestArray",(function(){return i.m})),n.d(e,"calculateInterval",(function(){return i.c})),n.d(e,"noteToObject",(function(){return i.q})),n.d(e,"isRest",(function(){return i.l})),n.d(e,"isRawNote",(function(){return i.k})),n.d(e,"transpose",(function(){return i.w})),n.d(e,"notesInRange",(function(){return i.r})),n.d(e,"getNoteDurations",(function(){return i.j})),n.d(e,"noteDurationInSeconds",(function(){return i.p})),n.d(e,"spellScale",(function(){return i.u})),n.d(e,"extractOctave",(function(){return i.d})),n.d(e,"extractPitchClass",(function(){return i.e})),n.d(e,"freqFromPitch",(function(){return i.h})),n.d(e,"freqToMidi",(function(){return i.i})),n.d(e,"midiToFreq",(function(){return i.o})),n.d(e,"ModelHelper",(function(){return i.a})),n.d(e,"RawHelper",(function(){return i.b})),n.d(e,"PitchClass",(function(){return a.PitchClass})),n.d(e,"Note",(function(){return a.Note})),n.d(e,"MusicalPattern",(function(){return a.MusicalPattern})),n.d(e,"Chord",(function(){return a.Chord})),n.d(e,"Scale",(function(){return a.Scale})),n.d(e,"GuitarChordPattern",(function(){return a.GuitarChordPattern})),n.d(e,"Measure",(function(){return u.Measure})),n.d(e,"Score",(function(){return u.Score})),n.d(e,"ScoreHandler",(function(){return u.ScoreHandler})),n.d(e,"DurationRule",(function(){return c.a})),n.d(e,"PatternRule",(function(){return c.b})),n.d(e,"PitchClassRule",(function(){return c.c})),n.d(e,"validateArray",(function(){return c.d})),n.d(e,"validateInstance",(function(){return c.e})),n.d(e,"validateNumber",(function(){return c.f})),n.d(e,"validateRawNote",(function(){return c.h})),n.d(e,"validatePitchClasses",(function(){return c.g})),n.d(e,"Constants",(function(){return s.a})),n.d(e,"lib",(function(){return o}))}])}));