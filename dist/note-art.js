!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("note-art",[],e):"object"==typeof exports?exports["note-art"]=e():t["note-art"]=e()}(window,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=31)}([function(t,e,n){"use strict";(function(t){var i=n(27),r=function(){if(!(this instanceof r))throw new Error("constructor needs to be called with the 'new' keyword")};
/**
 *  Tone.js
 *  @author Yotam Mann
 *  @license http://opensource.org/licenses/MIT MIT License
 *  @copyright 2014-2019 Yotam Mann
 */r.prototype.toString=function(){for(var t in r){var e=t[0].match(/^[A-Z]$/),n=r[t]===this.constructor;if(r.isFunction(r[t])&&e&&n)return t}return"Tone"},r.prototype.dispose=function(){return this},r.prototype.set=function(t,e){if(r.isString(t)){var n={};n[t]=e,t=n}t:for(var i in t){e=t[i];var o=this;if(-1!==i.indexOf(".")){for(var a=i.split("."),s=0;s<a.length-1;s++)if((o=o[a[s]])instanceof r){a.splice(0,s+1);var u=a.join(".");o.set(u,e);continue t}i=a[a.length-1]}var c=o[i];r.isUndef(c)||(r.Signal&&c instanceof r.Signal||r.Param&&c instanceof r.Param?c.value!==e&&(c.value=e):c instanceof AudioParam?c.value!==e&&(c.value=e):r.TimeBase&&c instanceof r.TimeBase?o[i]=e:c instanceof r?c.set(e):c!==e&&(o[i]=e))}return this},r.prototype.get=function(t){r.isUndef(t)?t=this._collectDefaults(this.constructor):r.isString(t)&&(t=[t]);for(var e={},n=0;n<t.length;n++){var i=t[n],o=this,a=e;if(-1!==i.indexOf(".")){for(var s=i.split("."),u=0;u<s.length-1;u++){var c=s[u];a[c]=a[c]||{},a=a[c],o=o[c]}i=s[s.length-1]}var l=o[i];r.isObject(t[i])?a[i]=l.get():r.Signal&&l instanceof r.Signal?a[i]=l.value:r.Param&&l instanceof r.Param?a[i]=l.value:l instanceof AudioParam?a[i]=l.value:l instanceof r?a[i]=l.get():!r.isFunction(l)&&r.isDefined(l)&&(a[i]=l)}return e},r.prototype._collectDefaults=function(t){var e=[];if(r.isDefined(t.defaults)&&(e=Object.keys(t.defaults)),r.isDefined(t._super))for(var n=this._collectDefaults(t._super),i=0;i<n.length;i++)-1===e.indexOf(n[i])&&e.push(n[i]);return e},r.defaults=function(t,e,n){var i={};if(1===t.length&&r.isObject(t[0]))i=t[0];else for(var o=0;o<e.length;o++)i[e[o]]=t[o];return r.isDefined(n.defaults)?r.defaultArg(i,n.defaults):r.isObject(n)?r.defaultArg(i,n):i},r.defaultArg=function(t,e){if(r.isObject(t)&&r.isObject(e)){var n={};for(var i in t)n[i]=r.defaultArg(e[i],t[i]);for(var o in e)n[o]=r.defaultArg(t[o],e[o]);return n}return r.isUndef(t)?e:t},r.prototype.log=function(){if(this.debug||this.toString()===r.global.TONE_DEBUG_CLASS){var t=Array.from(arguments);t.unshift(this.toString()+":"),console.log.apply(void 0,t)}},r.prototype.assert=function(t,e){if(!t)throw new Error(e)},r.connectSeries=function(){for(var t=arguments[0],e=1;e<arguments.length;e++){var n=arguments[e];r.connect(t,n),t=n}return r},r.connect=function(t,e,n,i){for(;r.isDefined(e.input);)r.isArray(e.input)?(i=r.defaultArg(i,0),e=e.input[i],i=0):e.input&&(e=e.input);return e instanceof AudioParam?t.connect(e,n):e instanceof AudioNode&&t.connect(e,n,i),r},r.disconnect=function(t,e,n,i){if(e){for(var o=!1;!o;)r.isArray(e.input)?(r.isDefined(i)?r.disconnect(t,e.input[i],n):e.input.forEach(function(e){try{r.disconnect(t,e,n)}catch(t){}}),o=!0):e.input?e=e.input:o=!0;e instanceof AudioParam?t.disconnect(e,n):e instanceof AudioNode&&t.disconnect(e,n,i)}else t.disconnect();return r},r.isUndef=function(t){return void 0===t},r.isDefined=function(t){return!r.isUndef(t)},r.isFunction=function(t){return"function"==typeof t},r.isNumber=function(t){return"number"==typeof t},r.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object},r.isBoolean=function(t){return"boolean"==typeof t},r.isArray=function(t){return Array.isArray(t)},r.isString=function(t){return"string"==typeof t},r.isNote=function(t){return r.isString(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)},r.noOp=function(){},r.prototype._readOnly=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._readOnly(t[e]);else Object.defineProperty(this,t,{writable:!1,enumerable:!0})},r.prototype._writable=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._writable(t[e]);else Object.defineProperty(this,t,{writable:!0})},r.State={Started:"started",Stopped:"stopped",Paused:"paused"},r.global=r.isUndef(t)?window:t,r.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},r.dbToGain=function(t){return Math.pow(10,t/20)},r.gainToDb=function(t){return Math.log(t)/Math.LN10*20},r.intervalToFrequencyRatio=function(t){return Math.pow(2,t/12)},r.prototype.now=function(){return r.context.now()},r.now=function(){return r.context.now()},r.prototype.immediate=function(){return r.context.currentTime},r.immediate=function(){return r.context.currentTime},r.extend=function(t,e){function n(){}r.isUndef(e)&&(e=r),n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,t._super=e},r._audioContext=null,r.start=function(){return r.context.resume()},Object.defineProperty(r,"context",{get:function(){return r._audioContext},set:function(t){t.isContext?r._audioContext=t:r._audioContext=new r.Context(t),r.Context.emit("init",r._audioContext)}}),Object.defineProperty(r.prototype,"context",{get:function(){return r.context}}),r.setContext=function(t){r.context=t},Object.defineProperty(r.prototype,"blockTime",{get:function(){return 128/this.context.sampleRate}}),Object.defineProperty(r.prototype,"sampleTime",{get:function(){return 1/this.context.sampleRate}}),Object.defineProperty(r,"supported",{get:function(){var t=r.global.hasOwnProperty("AudioContext")||r.global.hasOwnProperty("webkitAudioContext"),e=r.global.hasOwnProperty("Promise");return t&&e}}),Object.defineProperty(r,"initialized",{get:function(){return Boolean(r.context)}}),r.getContext=function(t){if(r.initialized)t(r.context);else{var e=function(){t(r.context),r.Context.off("init",e)};r.Context.on("init",e)}return r},r.version=i.a,e.a=r}).call(this,n(30))},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",function(){return o});var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"getPitchClassSet",value:function(e){return"#"===e?t.sharpClassNotes:"b"===e?t.flatClassNotes:null}},{key:"noteDurations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t?{64:"1",32:"2n",16:"4n",8:"8n",4:"16n",2:"32n",1:"64n"}:{"1n":64,"2n":32,"4n":16,"8n":8,"16n":4,"32n":2,"64n":1}}}],(n=null)&&i(e.prototype,n),r&&i(e,r),t}();r(o,"circleOfFourths",["C","F","Bb","Eb","Ab","Db","Gb"]),r(o,"circleOfFifths",["C","G","D","A","E","B","F#"]),r(o,"pitchClassSets",["#","b"]),r(o,"sharpClassNotes",["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]),r(o,"flatClassNotes",["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"]),r(o,"pitchClasses",["C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"]),r(o,"intervals",{U:0,m2:1,M2:2,m3:3,M3:4,P4:5,aug4:6,dim5:6,P5:7,m6:8,M6:9,m7:10,M7:11,P8:12}),r(o,"degrees",{major:["I","II","III","IV","V","VI","VII","VIII","IX","X","XI"],minor:["i","ii","iii","iv","v","vi","vii","viii","ix","x","xi"]})},function(t,e,n){"use strict";var i=n(1);function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,o=[{key:"validate",value:function(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],Object.keys(i.a.noteDurations()).includes(t)}}],(n=null)&&r(e.prototype,n),o&&r(e,o),t}(),a=n(4);function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"isPattern",value:function(e){if(t.isArray(e),!e.every(function(t){return parseInt(t)==t}))throw new a.a("_ should be an array where each member is an integer.");return!0}},{key:"isArray",value:function(t){if(!Array.isArray(t))throw new a.a("expected _ to be an array")}}],(n=null)&&s(e.prototype,n),i&&s(e,i),t}(),c=n(5);function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"exists",value:function(e){return!!t.validNotes().includes(e)}},{key:"validNotes",value:function(){return i.a.pitchClasses.concat(i.a.pitchClasses.map(function(t){return t.toLowerCase()}))}},{key:"isPitchClass",value:function(t){if(!c.PitchClass.isPitchClass(t))throw new a.a("expected _ to be an instance of PitchClass");return!0}}],(n=null)&&l(e.prototype,n),r&&l(e,r),t}(),p=n(9);n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return h}),n.d(e,"d",function(){return p.a}),n.d(e,"e",function(){return p.b}),n.d(e,"f",function(){return p.c}),n.d(e,"h",function(){return p.e}),n.d(e,"g",function(){return p.d})},function(t,e,n){"use strict";function i(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function r(t){return function(t){if(Array.isArray(t))return t}(t)||o(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function a(t){return t.charAt(0).toUpperCase()+t.slice(1)}function s(t){return Number(Number.parseFloat(t).toFixed(2))}function u(t,e,n){var i=r(t).slice(0),o=i[e];return i[e]=i[n],i[n]=o,i}function c(t,e){for(var n=[],r=0;r<e;)n.push(t.shift()),++r;return[].concat(i(t),n)}var l=n(1),h=n(5),p=n(2);n(4);function f(t,e){return Object(p.g)(t),Object(p.f)(e),t.map(function(t){return new h.Note(t.pitchClass,e)})}function d(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(p.g)(t),Object(p.f)(e),n&&(t=c(t,n));var i=e;return t.map(function(e,n){return n-1>=0&&e.classIndex<t[n-1].classIndex&&i++,new h.Note(e.pitchClass,i)})}function y(t,e){var n=t.classIndex,i=e.classIndex;return n-i<=0?Math.abs(n-i):12-(n-i)}function m(t){return Object(p.h)(t),{pitchClass:a(t.slice(0,t.length-1)),octave:parseInt(t[t.length-1])}}function v(t){return"R"===note||"r"===note}function _(t){if("string"!=typeof t)return!1;if(["r","R"].includes(t))return!0;var e=a(t.slice(0,t.length-1)),n=parseInt(t[t.length-1]);return!(!p.c.exists(e)||"number"!=typeof n)}function g(t,e){return Object(p.h)(t),v()?t:h.Note.builder(t).interval(e).raw}function b(t,e){for(var n,i=m(t),r=i.pitchClass,o=i.octave,a={},s=0;s<=e;++s)a[(n=l.a.flatClassNotes[(l.a.flatClassNotes.indexOf(r)+s)%12])+o]={pitchClass:n,octave:o},"B"===n&&o++;return a}function T(t,e){}var S=Math.pow(2,1/12);function k(t){var e=t.octave-4;return 440*Math.pow(S,t.classIndex-9+12*e)}function w(t){return Math.round(69+12*Math.log2(t/440))}function A(t){return 440*Math.pow(2,(t-69)/12)}n.d(e,"b",function(){return a}),n.d(e,"p",function(){return s}),n.d(e,"n",function(){return u}),n.d(e,"m",function(){return c}),n.d(e,"j",function(){return f}),n.d(e,"k",function(){return d}),n.d(e,"a",function(){return y}),n.d(e,"h",function(){return m}),n.d(e,"g",function(){return v}),n.d(e,"f",function(){return _}),n.d(e,"o",function(){return g}),n.d(e,"i",function(){return b}),n.d(e,"e",function(){return T}),n.d(e,"c",function(){return k}),n.d(e,"l",function(){return w}),n.d(e,"d",function(){return A})},function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){var e="function"==typeof Map?new Map:void 0;return(o=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return a(t,arguments,u(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),s(i,t)})(t)}function a(t,e,n){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&s(r,n.prototype),r}).apply(null,arguments)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",function(){return c});var c=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,u(e).call(this,"Invalid input: ".concat(t,".")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,o(Error)),e}()},function(t,e,n){"use strict";n.r(e);var i=n(6),r=n(10),o=n(2);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var c=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o.c.isPitchClass(e),o.b.isPattern(n),this.attributes={},this.setPitchClasses(e,n),this.attributes.info=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(n,!0).forEach(function(e){s(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},i,{pattern:n})}var e,n,i;return e=t,(n=[{key:"setPitchClasses",value:function(t,e){var n=[t];e.forEach(function(e){return n.push(t.interval(e))}),this.attributes.pitchClasses=n}},{key:"toString",value:function(){return this.pitchClasses.map(function(t){return t.raw}).join(", ")}},{key:"transpose",value:function(e){return new t(this.root.interval(e),this.pattern,this.info)}},{key:"pitchClasses",get:function(){return this.attributes.pitchClasses}},{key:"root",get:function(){return this.pitchClasses[0]}},{key:"info",get:function(){return this.attributes.info}},{key:"pattern",get:function(){return this.info.pattern}},{key:"raw",get:function(){return this.pitchClasses.map(function(t){return t.raw})}}])&&u(e.prototype,n),i&&u(e,i),t}();function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,p(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,c),e}(),y=n(3);function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var T=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),_(this,g(e).apply(this,arguments))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(e,c),n=e,(i=[{key:"degree",value:function(t){return this.pitchClasses[t-1]}},{key:"chord",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=this.pitchClasses,i=this.degree(t),r=t-1,o=[],a=1;a<e;++a)o.push(Object(y.a)(i,n[(r+2*a)%n.length]));return new d(i,o)}},{key:"chords",get:function(){var t=this;return this.pitchClasses.map(function(e,n){return t.chord(n+1,3)})}},{key:"seventhChords",get:function(){var t=this;return this.pitchClasses.map(function(e,n){return t.chord(n+1,4)})}}])&&v(n.prototype,i),r&&v(n,r),e}();function S(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var k=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o.b.isArray(e),this.attributes={pattern:e,pitchClass:n,name:i}}var e,n,r;return e=t,(n=[{key:"getChord",value:function(t){Object(o.e)(t,i.a);var e=Object(y.a)(this.pitchClass,t);return{pattern:this.pattern.map(function(t){return"x"===t?"x":t+e}),name:"".concat(t," ").concat(this.name)}}},{key:"pattern",get:function(){return this.attributes.pattern}},{key:"pitchClass",get:function(){return this.attributes.pitchClass}},{key:"name",get:function(){return this.attributes.name}}])&&S(e.prototype,n),r&&S(e,r),t}();n.d(e,"PitchClass",function(){return i.a}),n.d(e,"Note",function(){return r.a}),n.d(e,"MusicalPattern",function(){return c}),n.d(e,"Chord",function(){return d}),n.d(e,"Scale",function(){return T}),n.d(e,"GuitarChordPattern",function(){return k})},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n(3),r=n(2),o=n(1),a=n(4);function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n={};r.c.exists(e),n.pitchClass=Object(i.b)(e),n.classSet=o.a.circleOfFourths.includes(n.pitchClass)?"b":"#",n.classIndex=o.a.getPitchClassSet(n.classSet).indexOf(n.pitchClass),this.attributes=n}var e,n,u;return e=t,u=[{key:"isFlat",value:function(t){return t.includes("b")}},{key:"isSharp",value:function(t){return t.includes("#")}},{key:"flatToSharp",value:function(t){return this.alterPitchClass(t,"isFlat",-1)}},{key:"sharpToFlat",value:function(t){return this.alterPitchClass(t,"isSharp",1)}},{key:"alterPitchClass",value:function(e,n,i){return t[n](e)?o.a.pitchClasses[o.a.pitchClasses.indexOf(e)+i]:e}},{key:"isPitchClass",value:function(e){return e instanceof t}}],(n=[{key:"interval",value:function(e){if(e===parseInt(e))return new t(e>=0?o.a.getPitchClassSet(this.classSet)[(this.classIndex+e)%12]:o.a.getPitchClassSet(this.classSet)[Math.abs((this.classIndex+(12+e%12))%12)]);throw new a.a("".concat(e," is not a valid interval"))}},{key:"toString",value:function(){return this.pitchClass}},{key:"pitchClass",get:function(){return this.attributes.pitchClass}},{key:"classSet",get:function(){return this.attributes.classSet},set:function(e){o.a.pitchClassSets.includes(e)&&("b"===this.classSet?this.attributes.pitchClass=t.flatToSharp(this.pitchClass):this.attributes.pitchClass=t.sharpToFlat(this.pitchClass),this.attributes.classSet=e)}},{key:"classIndex",get:function(){return this.attributes.classIndex}},{key:"raw",get:function(){return this.pitchClass}}])&&s(e.prototype,n),u&&s(e,u),t}()},function(t,e,n){"use strict";var i=n(0);n(20),n(22),n(23),n(13);i.a.Type={Default:"number",Time:"time",Frequency:"frequency",TransportTime:"transportTime",Ticks:"ticks",NormalRange:"normalRange",AudioRange:"audioRange",Decibels:"db",Interval:"interval",BPM:"bpm",Positive:"positive",Gain:"gain",Cents:"cents",Degrees:"degrees",MIDI:"midi",BarsBeatsSixteenths:"barsBeatsSixteenths",Samples:"samples",Hertz:"hertz",Note:"note",Milliseconds:"milliseconds",Seconds:"seconds",Notation:"notation"},i.a.prototype.toSeconds=function(t){return i.a.isNumber(t)?t:i.a.isUndef(t)?this.now():i.a.isString(t)||i.a.isObject(t)?new i.a.Time(t).toSeconds():t instanceof i.a.TimeBase?t.toSeconds():void 0},i.a.prototype.toFrequency=function(t){return i.a.isNumber(t)?t:i.a.isString(t)||i.a.isUndef(t)||i.a.isObject(t)?new i.a.Frequency(t).valueOf():t instanceof i.a.TimeBase?t.toFrequency():void 0},i.a.prototype.toTicks=function(t){return i.a.isNumber(t)||i.a.isString(t)||i.a.isObject(t)?new i.a.TransportTime(t).toTicks():i.a.isUndef(t)?i.a.Transport.ticks:t instanceof i.a.TimeBase?t.toTicks():void 0};i.a},function(t,e,n){"use strict";var i=n(0);n(13);if(i.a.supported){var r=new OfflineAudioContext(2,1,44100),o=r.createGain(),a=r.createGain();if(o.connect(a)!==a){var s=AudioNode.prototype.connect;AudioNode.prototype.connect=function(){return s.apply(this,arguments),arguments[0]}}}i.a.AudioNode=function(){i.a.call(this);var t=i.a.defaults(arguments,["context"],{context:i.a.context});this._context=t.context},i.a.extend(i.a.AudioNode),Object.defineProperty(i.a.AudioNode.prototype,"context",{get:function(){return this._context}}),i.a.AudioNode.prototype.createInsOuts=function(t,e){1===t?this.input=this.context.createGain():t>1&&(this.input=new Array(t)),1===e?this.output=this.context.createGain():e>1&&(this.output=new Array(e))},Object.defineProperty(i.a.AudioNode.prototype,"channelCount",{get:function(){return this.output.channelCount},set:function(t){return this.output.channelCount=t}}),Object.defineProperty(i.a.AudioNode.prototype,"channelCountMode",{get:function(){return this.output.channelCountMode},set:function(t){return this.output.channelCountMode=t}}),Object.defineProperty(i.a.AudioNode.prototype,"channelInterpretation",{get:function(){return this.output.channelInterpretation},set:function(t){return this.output.channelInterpretation=t}}),Object.defineProperty(i.a.AudioNode.prototype,"numberOfInputs",{get:function(){return this.input?i.a.isArray(this.input)?this.input.length:1:0}}),Object.defineProperty(i.a.AudioNode.prototype,"numberOfOutputs",{get:function(){return this.output?i.a.isArray(this.output)?this.output.length:1:0}}),i.a.AudioNode.prototype.connect=function(t,e,n){return i.a.isArray(this.output)?(e=i.a.defaultArg(e,0),this.output[e].connect(t,0,n)):i.a.connect(this.output,t,e,n),this},i.a.AudioNode.prototype.disconnect=function(t,e,n){return i.a.isArray(this.output)?(e=i.a.defaultArg(e,0),this.output[e].disconnect(t,0,n)):i.a.disconnect(this.output,t,e,n),this},i.a.AudioNode.prototype.chain=function(){var t=Array.from(arguments);return t.unshift(this),i.a.connectSeries.apply(void 0,t),this},i.a.AudioNode.prototype.fan=function(){for(var t=0;t<arguments.length;t++)this.connect(arguments[t]);return this},i.a.AudioNode.prototype.dispose=function(){return i.a.isDefined(this.input)&&(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),i.a.isDefined(this.output)&&(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null),this._context=null,this};i.a.AudioNode},function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"d",function(){return l});var i=n(4),r=n(3),o=(n(2),n(5));function a(t){if(!Array.isArray(t))throw new i.a("expected ".concat(t," to be an array"));return!0}function s(t,e){if(!(t instanceof e))throw new i.a("expected ".concat(t," to be an instance of ").concat(e.name));return!0}function u(t){if("number"!=typeof t)throw new i.a("expected ".concat(t," to be a number"));return!0}function c(t){if(!Object(r.f)(t))throw new i.a("Expected ".concat(note," to be a string representing a note"));return!0}function l(t){a(t),t.forEach(function(t){return s(t,o.PitchClass)})}},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var i=n(6),r=n(1),o=n(3),a=n(2);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){function e(t,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i=c(this,h(e).call(this,t)),Object(a.f)(n),i.attributes.octave=n,i}var n,s,f;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(e,i["a"]),n=e,f=[{key:"builder",value:function(t){var n=Object(o.h)(t);return new e(n.pitchClass,n.octave)}},{key:"fromFrequency",value:function(t){var n=Object(o.l)(t);return new e(r.a.sharpClassNotes[n%12],Math.floor(n/12-1))}}],(s=[{key:"interval",value:function(t){var n=l(h(e.prototype),"interval",this).call(this,t).pitchClass,i=Math.floor((this.classIndex+t)/12);return t<0&&(i=this.classIndex+t<0?i:0),new e(n,this.octave+i)}},{key:"transpose",value:function(t){return this.interval(t)}},{key:"toString",value:function(){return"".concat(l(h(e.prototype),"toString",this).call(this)).concat(this.octave)}},{key:"octave",get:function(){return this.attributes.octave}},{key:"raw",get:function(){return"".concat(l(h(e.prototype),"toString",this).call(this)).concat(this.octave)}}])&&u(n.prototype,s),f&&u(n,f),e}()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n(0);function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.instances={}}var e,n,i;return e=t,(n=[{key:"get",value:function(t){return this.instances[t].called||(this.instances[t].called=!0,this.instances[t].value=this.instances[t].value()),this.instances[t].value}},{key:"set",value:function(t,e){this.instances[t]={called:!1,value:e}}}])&&r(e.prototype,n),i&&r(e,i),t}());o.set("tone",function(){return i.a}),o.set("path",function(){return"https://note-art-server.herokuapp.com/audio/"}),o.set("ready",function(){return!1}),o.set("Cord",function(){return"guitar"}),o.set("Piano",function(){return"piano"}),o.set("Drumset",function(){return"drums"})},function(t,e,n){"use strict";var i=n(0);i.a.Timeline=function(){var t=i.a.defaults(arguments,["memory"],i.a.Timeline);i.a.call(this),this._timeline=[],this.memory=t.memory},i.a.extend(i.a.Timeline),i.a.Timeline.defaults={memory:1/0},Object.defineProperty(i.a.Timeline.prototype,"length",{get:function(){return this._timeline.length}}),i.a.Timeline.prototype.add=function(t){if(i.a.isUndef(t.time))throw new Error("Tone.Timeline: events must have a time attribute");t.time=t.time.valueOf();var e=this._search(t.time);if(this._timeline.splice(e+1,0,t),this.length>this.memory){var n=this.length-this.memory;this._timeline.splice(0,n)}return this},i.a.Timeline.prototype.remove=function(t){var e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this},i.a.Timeline.prototype.get=function(t,e){e=i.a.defaultArg(e,"time");var n=this._search(t,e);return-1!==n?this._timeline[n]:null},i.a.Timeline.prototype.peek=function(){return this._timeline[0]},i.a.Timeline.prototype.shift=function(){return this._timeline.shift()},i.a.Timeline.prototype.getAfter=function(t,e){e=i.a.defaultArg(e,"time");var n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null},i.a.Timeline.prototype.getBefore=function(t,e){e=i.a.defaultArg(e,"time");var n=this._timeline.length;if(n>0&&this._timeline[n-1][e]<t)return this._timeline[n-1];var r=this._search(t,e);return r-1>=0?this._timeline[r-1]:null},i.a.Timeline.prototype.cancel=function(t){if(this._timeline.length>1){var e=this._search(t);if(e>=0)if(this._timeline[e].time===t){for(var n=e;n>=0&&this._timeline[n].time===t;n--)e=n;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&this._timeline[0].time>=t&&(this._timeline=[]);return this},i.a.Timeline.prototype.cancelBefore=function(t){var e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this},i.a.Timeline.prototype.previousEvent=function(t){var e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null},i.a.Timeline.prototype._search=function(t,e){if(0===this._timeline.length)return-1;e=i.a.defaultArg(e,"time");var n=0,r=this._timeline.length,o=r;if(r>0&&this._timeline[r-1][e]<=t)return r-1;for(;n<o;){var a=Math.floor(n+(o-n)/2),s=this._timeline[a],u=this._timeline[a+1];if(s[e]===t){for(var c=a;c<this._timeline.length;c++){this._timeline[c][e]===t&&(a=c)}return a}if(s[e]<t&&u[e]>t)return a;s[e]>t?o=a:n=a+1}return-1},i.a.Timeline.prototype._iterate=function(t,e,n){e=i.a.defaultArg(e,0),n=i.a.defaultArg(n,this._timeline.length-1),this._timeline.slice(e,n+1).forEach(function(e){t.call(this,e)}.bind(this))},i.a.Timeline.prototype.forEach=function(t){return this._iterate(t),this},i.a.Timeline.prototype.forEachBefore=function(t,e){var n=this._search(t);return-1!==n&&this._iterate(e,0,n),this},i.a.Timeline.prototype.forEachAfter=function(t,e){var n=this._search(t);return this._iterate(e,n+1),this},i.a.Timeline.prototype.forEachBetween=function(t,e,n){var i=this._search(t),r=this._search(e);return-1!==i&&-1!==r?(this._timeline[i].time!==t&&(i+=1),this._timeline[r].time===e&&(r-=1),this._iterate(n,i,r)):-1===i&&this._iterate(n,0,r),this},i.a.Timeline.prototype.forEachFrom=function(t,e){for(var n=this._search(t);n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this},i.a.Timeline.prototype.forEachAtTime=function(t,e){var n=this._search(t);return-1!==n&&this._iterate(function(n){n.time===t&&e.call(this,n)},0,n),this},i.a.Timeline.prototype.dispose=function(){return i.a.prototype.dispose.call(this),this._timeline=null,this};i.a.Timeline},function(t,e,n){"use strict";var i=n(0),r=(n(15),n(12),n(19),["baseLatency","destination","currentTime","sampleRate","listener","state"]),o=["suspend","close","resume","getOutputTimestamp","createMediaElementSource","createMediaStreamSource","createMediaStreamDestination","createBuffer","decodeAudioData","createBufferSource","createConstantSource","createGain","createDelay","createBiquadFilter","createIIRFilter","createWaveShaper","createPanner","createConvolver","createDynamicsCompressor","createAnalyser","createScriptProcessor","createStereoPanner","createOscillator","createPeriodicWave","createChannelSplitter","createChannelMerger","audioWorklet"];i.a.Context=function(){i.a.Emitter.call(this);var t=i.a.defaults(arguments,["context"],i.a.Context);if(!t.context&&(t.context=new i.a.global.AudioContext,!t.context))throw new Error("could not create AudioContext. Possibly too many AudioContexts running already.");for(this._context=t.context;this._context.rawContext;)this._context=this._context.rawContext;r.forEach(function(t){this._defineProperty(this._context,t)}.bind(this)),o.forEach(function(t){this._defineMethod(this._context,t)}.bind(this)),this._latencyHint=t.latencyHint,this._constants={},this.lookAhead=t.lookAhead,this._computedUpdateInterval=0,this._ticker=new a(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval),this._timeouts=new i.a.Timeline,this._timeoutIds=0,this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=function(t){this.emit("statechange",t)}.bind(this)},i.a.extend(i.a.Context,i.a.Emitter),i.a.Emitter.mixin(i.a.Context),i.a.Context.defaults={clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.03},i.a.Context.prototype.isContext=!0,i.a.Context.prototype._defineProperty=function(t,e){i.a.isUndef(this[e])&&Object.defineProperty(this,e,{get:function(){return t[e]},set:function(n){t[e]=n}})},i.a.Context.prototype._defineMethod=function(t,e){i.a.isUndef(this[e])&&Object.defineProperty(this,e,{get:function(){return t[e].bind(t)}})},i.a.Context.prototype.now=function(){return this._context.currentTime+this.lookAhead},Object.defineProperty(i.a.Context.prototype,"destination",{get:function(){return this.master?this.master:this._context.destination}}),i.a.Context.prototype.resume=function(){return"suspended"===this._context.state&&this._context instanceof AudioContext?this._context.resume():Promise.resolve()},i.a.Context.prototype.close=function(){var t=Promise.resolve();return this!==i.a.global.TONE_AUDIO_CONTEXT&&(t=this.rawContext.close()),t.then(function(){i.a.Context.emit("close",this)}.bind(this))},i.a.Context.prototype.getConstant=function(t){if(this._constants[t])return this._constants[t];for(var e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0),i=0;i<n.length;i++)n[i]=t;var r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=e,r.loop=!0,r.start(0),this._constants[t]=r,r},i.a.Context.prototype._timeoutLoop=function(){for(var t=this.now();this._timeouts&&this._timeouts.length&&this._timeouts.peek().time<=t;)this._timeouts.shift().callback()},i.a.Context.prototype.setTimeout=function(t,e){this._timeoutIds++;var n=this.now();return this._timeouts.add({callback:t,time:n+e,id:this._timeoutIds}),this._timeoutIds},i.a.Context.prototype.clearTimeout=function(t){return this._timeouts.forEach(function(e){e.id===t&&this.remove(e)}),this},Object.defineProperty(i.a.Context.prototype,"updateInterval",{get:function(){return this._ticker.updateInterval},set:function(t){this._ticker.updateInterval=t}}),Object.defineProperty(i.a.Context.prototype,"rawContext",{get:function(){return this._context}}),Object.defineProperty(i.a.Context.prototype,"clockSource",{get:function(){return this._ticker.type},set:function(t){this._ticker.type=t}}),Object.defineProperty(i.a.Context.prototype,"latencyHint",{get:function(){return this._latencyHint},set:function(t){var e=t;if(this._latencyHint=t,i.a.isString(t))switch(t){case"interactive":e=.1,this._context.latencyHint=t;break;case"playback":e=.8,this._context.latencyHint=t;break;case"balanced":e=.25,this._context.latencyHint=t;break;case"fastest":this._context.latencyHint="interactive",e=.01}this.lookAhead=e,this.updateInterval=e/3}}),i.a.Context.prototype.dispose=function(){return this.close().then(function(){for(var t in i.a.Emitter.prototype.dispose.call(this),this._ticker.dispose(),this._ticker=null,this._timeouts.dispose(),this._timeouts=null,this._constants)this._constants[t].disconnect();this._constants=null}.bind(this))};var a=function(t,e,n){this._type=e,this._updateInterval=n,this._callback=i.a.defaultArg(t,i.a.noOp),this._createClock()};if(a.Type={Worker:"worker",Timeout:"timeout",Offline:"offline"},a.prototype._createWorker=function(){i.a.global.URL=i.a.global.URL||i.a.global.webkitURL;var t=new Blob(["var timeoutTime = "+(1e3*this._updateInterval).toFixed(1)+";self.onmessage = function(msg){\ttimeoutTime = parseInt(msg.data);};function tick(){\tsetTimeout(tick, timeoutTime);\tself.postMessage('tick');}tick();"]),e=URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n},a.prototype._createTimeout=function(){this._timeout=setTimeout(function(){this._createTimeout(),this._callback()}.bind(this),1e3*this._updateInterval)},a.prototype._createClock=function(){if(this._type===a.Type.Worker)try{this._createWorker()}catch(t){this._type=a.Type.Timeout,this._createClock()}else this._type===a.Type.Timeout&&this._createTimeout()},Object.defineProperty(a.prototype,"updateInterval",{get:function(){return this._updateInterval},set:function(t){this._updateInterval=Math.max(t,128/44100),this._type===a.Type.Worker&&this._worker.postMessage(Math.max(1e3*t,1))}}),Object.defineProperty(a.prototype,"type",{get:function(){return this._type},set:function(t){this._disposeClock(),this._type=t,this._createClock()}}),a.prototype._disposeClock=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this._worker&&(this._worker.terminate(),this._worker.onmessage=null,this._worker=null)},a.prototype.dispose=function(){this._disposeClock(),this._callback=null},i.a.supported&&!i.a.initialized){if(i.a.global.TONE_AUDIO_CONTEXT||(i.a.global.TONE_AUDIO_CONTEXT=new i.a.Context),i.a.context=i.a.global.TONE_AUDIO_CONTEXT,!i.a.global.TONE_SILENCE_LOGGING){var s="v";"dev"===i.a.version&&(s="");var u=" * Tone.js "+s+i.a.version+" * ";console.log("%c"+u,"background: #000; color: #fff")}}else i.a.supported||i.a.global.TONE_SILENCE_LOGGING||console.warn("This browser does not support Tone.js");i.a.Context},function(t,e,n){"use strict";var i=n(0);n(17),n(7),n(8);i.a.Gain=function(){var t=i.a.defaults(arguments,["gain","units"],i.a.Gain);i.a.AudioNode.call(this,t),this.input=this.output=this._gainNode=this.context.createGain(),this.gain=new i.a.Param({param:this._gainNode.gain,units:t.units,value:t.gain,convert:t.convert}),this._readOnly("gain")},i.a.extend(i.a.Gain,i.a.AudioNode),i.a.Gain.defaults={gain:1,convert:!0},i.a.Gain.prototype.dispose=function(){i.a.AudioNode.prototype.dispose.call(this),this._gainNode.disconnect(),this._gainNode=null,this._writable("gain"),this.gain.dispose(),this.gain=null};i.a.Gain},function(t,e,n){"use strict";var i=n(0);i.a.Emitter=function(){i.a.call(this),this._events={}},i.a.extend(i.a.Emitter),i.a.Emitter.prototype.on=function(t,e){for(var n=t.split(/\W+/),i=0;i<n.length;i++){var r=n[i];this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(e)}return this},i.a.Emitter.prototype.once=function(t,e){var n=function(){e.apply(this,arguments),this.off(t,n)}.bind(this);return this.on(t,n),this},i.a.Emitter.prototype.off=function(t,e){for(var n=t.split(/\W+/),r=0;r<n.length;r++)if(t=n[r],this._events.hasOwnProperty(t))if(i.a.isUndef(e))this._events[t]=[];else for(var o=this._events[t],a=0;a<o.length;a++)o[a]===e&&o.splice(a,1);return this},i.a.Emitter.prototype.emit=function(t){if(this._events){var e=Array.apply(null,arguments).slice(1);if(this._events.hasOwnProperty(t))for(var n=this._events[t].slice(0),i=0,r=n.length;i<r;i++)n[i].apply(this,e)}return this},i.a.Emitter.mixin=function(t){var e=["on","once","off","emit"];t._events={};for(var n=0;n<e.length;n++){var r=e[n],o=i.a.Emitter.prototype[r];t[r]=o}return i.a.Emitter},i.a.Emitter.prototype.dispose=function(){return i.a.prototype.dispose.call(this),this._events=null,this};i.a.Emitter},function(t,e,n){"use strict";var i=n(0);n(7),n(17),n(24),n(19),n(13),n(14);if(i.a.supported&&!i.a.global.AudioContext.prototype.createConstantSource){var r=function(t){this.context=t;for(var e=t.createBuffer(1,128,t.sampleRate),n=e.getChannelData(0),i=0;i<n.length;i++)n[i]=1;this._bufferSource=t.createBufferSource(),this._bufferSource.channelCount=1,this._bufferSource.channelCountMode="explicit",this._bufferSource.buffer=e,this._bufferSource.loop=!0;var r=this._output=t.createGain();this.offset=r.gain,this._bufferSource.connect(r)};r.prototype.start=function(t){return this._bufferSource.start(t),this},r.prototype.stop=function(t){return this._bufferSource.stop(t),this},r.prototype.connect=function(){return this._output.connect.apply(this._output,arguments),this},r.prototype.disconnect=function(){return this._output.disconnect.apply(this._output,arguments),this},AudioContext.prototype.createConstantSource=function(){return new r(this)},i.a.Context.prototype.createConstantSource=function(){return new r(this)}}i.a.Signal=function(){var t=i.a.defaults(arguments,["value","units"],i.a.Signal);i.a.Param.call(this,t),this._constantSource=this.context.createConstantSource(),this._constantSource.start(0),this._param=this._constantSource.offset,this.value=t.value,this.output=this._constantSource,this.input=this._param=this.output.offset},i.a.extend(i.a.Signal,i.a.Param),i.a.Signal.defaults={value:0,units:i.a.Type.Default,convert:!0},i.a.Signal.prototype.connect=i.a.SignalBase.prototype.connect,i.a.Signal.prototype.disconnect=i.a.SignalBase.prototype.disconnect,i.a.Signal.prototype.getValueAtTime=function(t){return this._param.getValueAtTime?this._param.getValueAtTime(t):i.a.Param.prototype.getValueAtTime.call(this,t)},i.a.Signal.prototype.dispose=function(){return i.a.Param.prototype.dispose.call(this),this._constantSource.stop(),this._constantSource.disconnect(),this._constantSource=null,this};i.a.Signal},function(t,e,n){"use strict";var i=n(0);n(7),n(8),n(12);i.a.Param=function(){var t=i.a.defaults(arguments,["param","units","convert"],i.a.Param);i.a.AudioNode.call(this,t),this._param=this.input=t.param,this.units=t.units,this.convert=t.convert,this.overridden=!1,this._events=new i.a.Timeline(1e3),i.a.isDefined(t.value)&&this._param&&this.setValueAtTime(t.value,0)},i.a.extend(i.a.Param,i.a.AudioNode),i.a.Param.defaults={units:i.a.Type.Default,convert:!0,param:void 0},Object.defineProperty(i.a.Param.prototype,"value",{get:function(){var t=this.now();return this._toUnits(this.getValueAtTime(t))},set:function(t){this._initialValue=this._fromUnits(t),this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}}),Object.defineProperty(i.a.Param.prototype,"minValue",{get:function(){return this.units===i.a.Type.Time||this.units===i.a.Type.Frequency||this.units===i.a.Type.NormalRange||this.units===i.a.Type.Positive||this.units===i.a.Type.BPM?0:this.units===i.a.Type.AudioRange?-1:this.units===i.a.Type.Decibels?-1/0:this._param.minValue}}),Object.defineProperty(i.a.Param.prototype,"maxValue",{get:function(){return this.units===i.a.Type.NormalRange||this.units===i.a.Type.AudioRange?1:this._param.maxValue}}),i.a.Param.prototype._fromUnits=function(t){if(!this.convert&&!i.a.isUndef(this.convert)||this.overridden)return t;switch(this.units){case i.a.Type.Time:return this.toSeconds(t);case i.a.Type.Frequency:return this.toFrequency(t);case i.a.Type.Decibels:return i.a.dbToGain(t);case i.a.Type.NormalRange:return Math.min(Math.max(t,0),1);case i.a.Type.AudioRange:return Math.min(Math.max(t,-1),1);case i.a.Type.Positive:return Math.max(t,0);default:return t}},i.a.Param.prototype._toUnits=function(t){if(!this.convert&&!i.a.isUndef(this.convert))return t;switch(this.units){case i.a.Type.Decibels:return i.a.gainToDb(t);default:return t}},i.a.Param.prototype._minOutput=1e-5,i.a.Param.AutomationType={Linear:"linearRampToValueAtTime",Exponential:"exponentialRampToValueAtTime",Target:"setTargetAtTime",SetValue:"setValueAtTime",Cancel:"cancelScheduledValues"},i.a.Param.prototype.setValueAtTime=function(t,e){return e=this.toSeconds(e),t=this._fromUnits(t),this._events.add({type:i.a.Param.AutomationType.SetValue,value:t,time:e}),this.log(i.a.Param.AutomationType.SetValue,t,e),this._param.setValueAtTime(t,e),this},i.a.Param.prototype.getValueAtTime=function(t){t=this.toSeconds(t);var e=this._events.getAfter(t),n=this._events.get(t),r=i.a.defaultArg(this._initialValue,this._param.defaultValue),o=r;if(null===n)o=r;else if(n.type===i.a.Param.AutomationType.Target){var a,s=this._events.getBefore(n.time);a=null===s?r:s.value,o=this._exponentialApproach(n.time,a,n.value,n.constant,t)}else o=null===e?n.value:e.type===i.a.Param.AutomationType.Linear?this._linearInterpolate(n.time,n.value,e.time,e.value,t):e.type===i.a.Param.AutomationType.Exponential?this._exponentialInterpolate(n.time,n.value,e.time,e.value,t):n.value;return o},i.a.Param.prototype.setRampPoint=function(t){t=this.toSeconds(t);var e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===e&&(e=this._minOutput),this.setValueAtTime(this._toUnits(e),t),this},i.a.Param.prototype.linearRampToValueAtTime=function(t,e){return t=this._fromUnits(t),e=this.toSeconds(e),this._events.add({type:i.a.Param.AutomationType.Linear,value:t,time:e}),this.log(i.a.Param.AutomationType.Linear,t,e),this._param.linearRampToValueAtTime(t,e),this},i.a.Param.prototype.exponentialRampToValueAtTime=function(t,e){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),e=this.toSeconds(e),this._events.add({type:i.a.Param.AutomationType.Exponential,time:e,value:t}),this.log(i.a.Param.AutomationType.Exponential,t,e),this._param.exponentialRampToValueAtTime(t,e),this},i.a.Param.prototype.exponentialRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this},i.a.Param.prototype.linearRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this},i.a.Param.prototype.targetRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this},i.a.Param.prototype.exponentialApproachValueAtTime=function(t,e,n){var i=Math.log(this.toSeconds(n)+1)/Math.log(200);return e=this.toSeconds(e),this.setTargetAtTime(t,e,i),this.cancelAndHoldAtTime(e+.9*n),this.linearRampToValueAtTime(t,e+n),this},i.a.Param.prototype.setTargetAtTime=function(t,e,n){if(t=this._fromUnits(t),n<=0)throw new Error("timeConstant must be greater than 0");return e=this.toSeconds(e),this._events.add({type:i.a.Param.AutomationType.Target,value:t,time:e,constant:n}),this.log(i.a.Param.AutomationType.Target,t,e,n),this._param.setTargetAtTime(t,e,n),this},i.a.Param.prototype.setValueCurveAtTime=function(t,e,n,r){r=i.a.defaultArg(r,1),n=this.toSeconds(n),e=this.toSeconds(e),this.setValueAtTime(t[0]*r,e);for(var o=n/(t.length-1),a=1;a<t.length;a++)this.linearRampToValueAtTime(t[a]*r,e+a*o);return this},i.a.Param.prototype.cancelScheduledValues=function(t){return t=this.toSeconds(t),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(i.a.Param.AutomationType.Cancel,t),this},i.a.Param.prototype.cancelAndHoldAtTime=function(t){t=this.toSeconds(t);var e=this.getValueAtTime(t);this.log("cancelAndHoldAtTime",t,"value="+e),this._param.cancelScheduledValues(t);var n=this._events.get(t),r=this._events.getAfter(t);return n&&n.time===t?r?this._events.cancel(r.time):this._events.cancel(t+this.sampleTime):r&&(this._events.cancel(r.time),r.type===i.a.Param.AutomationType.Linear?this.linearRampToValueAtTime(e,t):r.type===i.a.Param.AutomationType.Exponential&&this.exponentialRampToValueAtTime(e,t)),this._events.add({type:i.a.Param.AutomationType.SetValue,value:e,time:t}),this._param.setValueAtTime(e,t),this},i.a.Param.prototype.rampTo=function(t,e,n){return e=i.a.defaultArg(e,.1),this.units===i.a.Type.Frequency||this.units===i.a.Type.BPM||this.units===i.a.Type.Decibels?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this},i.a.Param.prototype._exponentialApproach=function(t,e,n,i,r){return n+(e-n)*Math.exp(-(r-t)/i)},i.a.Param.prototype._linearInterpolate=function(t,e,n,i,r){return e+(r-t)/(n-t)*(i-e)},i.a.Param.prototype._exponentialInterpolate=function(t,e,n,i,r){return e*Math.pow(i/e,(r-t)/(n-t))},i.a.Param.prototype.dispose=function(){return i.a.AudioNode.prototype.dispose.call(this),this._param=null,this._events=null,this};i.a.Param},function(t,e,n){"use strict";var i=n(0);n(12),n(7);i.a.TimelineState=function(t){i.a.Timeline.call(this),this._initial=t},i.a.extend(i.a.TimelineState,i.a.Timeline),i.a.TimelineState.prototype.getValueAtTime=function(t){var e=this.get(t);return null!==e?e.state:this._initial},i.a.TimelineState.prototype.setStateAtTime=function(t,e){return this.add({state:t,time:e}),this},i.a.TimelineState.prototype.getLastState=function(t,e){e=this.toSeconds(e);for(var n=this._search(e);n>=0;n--){var i=this._timeline[n];if(i.state===t)return i}},i.a.TimelineState.prototype.getNextState=function(t,e){e=this.toSeconds(e);var n=this._search(e);if(-1!==n)for(var i=n;i<this._timeline.length;i++){var r=this._timeline[i];if(r.state===t)return r}};i.a.TimelineState},function(t,e,n){"use strict";var i=n(0);if(i.a.supported){!i.a.global.hasOwnProperty("OfflineAudioContext")&&i.a.global.hasOwnProperty("webkitOfflineAudioContext")&&(i.a.global.OfflineAudioContext=i.a.global.webkitOfflineAudioContext);var r=new OfflineAudioContext(1,1,44100).startRendering();r&&i.a.isFunction(r.then)||(OfflineAudioContext.prototype._native_startRendering=OfflineAudioContext.prototype.startRendering,OfflineAudioContext.prototype.startRendering=function(){return new Promise(function(t){this.oncomplete=function(e){t(e.renderedBuffer)},this._native_startRendering()}.bind(this))})}if(i.a.supported){!i.a.global.hasOwnProperty("AudioContext")&&i.a.global.hasOwnProperty("webkitAudioContext")&&(i.a.global.AudioContext=i.a.global.webkitAudioContext),AudioContext.prototype.close||(AudioContext.prototype.close=function(){return i.a.isFunction(this.suspend)&&this.suspend(),Promise.resolve()}),AudioContext.prototype.resume||(AudioContext.prototype.resume=function(){var t=this.createBuffer(1,1,this.sampleRate),e=this.createBufferSource();return e.buffer=t,e.connect(this.destination),e.start(0),Promise.resolve()}),!AudioContext.prototype.createGain&&AudioContext.prototype.createGainNode&&(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),!AudioContext.prototype.createDelay&&AudioContext.prototype.createDelayNode&&(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode);var o=!1,a=new OfflineAudioContext(1,1,44100),s=new Uint32Array([1179011410,48,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,8,0,0,0,0]).buffer;try{var u=a.decodeAudioData(s);u&&i.a.isFunction(u.then)&&(o=!0)}catch(t){o=!1}o||(AudioContext.prototype._native_decodeAudioData=AudioContext.prototype.decodeAudioData,AudioContext.prototype.decodeAudioData=function(t){return new Promise(function(e,n){this._native_decodeAudioData(t,e,n)}.bind(this))})}},function(t,e,n){"use strict";var i=n(0);n(21),n(22);i.a.Time=function(t,e){if(!(this instanceof i.a.Time))return new i.a.Time(t,e);i.a.TimeBase.call(this,t,e)},i.a.extend(i.a.Time,i.a.TimeBase),i.a.Time.prototype._expressions=Object.assign({},i.a.TimeBase.prototype._expressions,{quantize:{regexp:/^@(.+)/,method:function(t){if(i.a.Transport){var e=new this.constructor(t);return this._secondsToUnits(i.a.Transport.nextSubdivision(e))}return 0}},now:{regexp:/^\+(.+)/,method:function(t){return this._now()+new this.constructor(t)}}}),i.a.Time.prototype.quantize=function(t,e){e=i.a.defaultArg(e,1);var n=new this.constructor(t),r=this.valueOf();return r+(Math.round(r/n)*n-r)*e},i.a.Time.prototype.toNotation=function(){for(var t=this.toSeconds(),e=["1m"],n=1;n<8;n++){var r=Math.pow(2,n);e.push(r+"n."),e.push(r+"n"),e.push(r+"t")}e.push("0");var o=e[0],a=i.a.Time(e[0]).toSeconds();return e.forEach(function(e){var n=i.a.Time(e).toSeconds();Math.abs(n-t)<Math.abs(a-t)&&(o=e,a=n)}),o},i.a.Time.prototype.toBarsBeatsSixteenths=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;e=parseFloat(e.toFixed(4));var n=Math.floor(e/this._getTimeSignature()),i=e%1*4;return e=Math.floor(e)%this._getTimeSignature(),(i=i.toString()).length>3&&(i=parseFloat(parseFloat(i).toFixed(3))),[n,e,i].join(":")},i.a.Time.prototype.toTicks=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())},i.a.Time.prototype.toSeconds=function(){return this.valueOf()},i.a.Time.prototype.toMidi=function(){return i.a.Frequency.ftom(this.toFrequency())};i.a.Time},function(t,e,n){"use strict";var i=n(0);i.a.TimeBase=function(t,e){if(!(this instanceof i.a.TimeBase))return new i.a.TimeBase(t,e);if(this._val=t,this._units=e,i.a.isUndef(this._units)&&i.a.isString(this._val)&&parseFloat(this._val)==this._val&&"+"!==this._val.charAt(0))this._val=parseFloat(this._val),this._units=this._defaultUnits;else if(t&&t.constructor===this.constructor)this._val=t._val,this._units=t._units;else if(t instanceof i.a.TimeBase)switch(this._defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();break;default:throw new Error("Unrecognized default units "+this._defaultUnits)}},i.a.extend(i.a.TimeBase),i.a.TimeBase.prototype._expressions={n:{regexp:/^(\d+)n(\.?)$/i,method:function(t,e){var n="."===e?1.5:1;return 1===(t=parseInt(t))?this._beatsToUnits(this._getTimeSignature())*n:this._beatsToUnits(4/t)*n}},t:{regexp:/^(\d+)t$/i,method:function(t){return t=parseInt(t),this._beatsToUnits(8/(3*parseInt(t)))}},m:{regexp:/^(\d+)m$/i,method:function(t){return this._beatsToUnits(parseInt(t)*this._getTimeSignature())}},i:{regexp:/^(\d+)i$/i,method:function(t){return this._ticksToUnits(parseInt(t))}},hz:{regexp:/^(\d+(?:\.\d+)?)hz$/i,method:function(t){return this._frequencyToUnits(parseFloat(t))}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/,method:function(t,e,n){var i=0;return t&&"0"!==t&&(i+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(i+=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(i+=this._beatsToUnits(parseFloat(n)/4)),i}},s:{regexp:/^(\d+(?:\.\d+)?)s$/,method:function(t){return this._secondsToUnits(parseFloat(t))}},samples:{regexp:/^(\d+)samples$/,method:function(t){return parseInt(t)/this.context.sampleRate}},default:{regexp:/^(\d+(?:\.\d+)?)$/,method:function(t){return this._expressions[this._defaultUnits].method.call(this,t)}}},i.a.TimeBase.prototype._defaultUnits="s",i.a.TimeBase.prototype._getBpm=function(){return i.a.Transport?i.a.Transport.bpm.value:120},i.a.TimeBase.prototype._getTimeSignature=function(){return i.a.Transport?i.a.Transport.timeSignature:4},i.a.TimeBase.prototype._getPPQ=function(){return i.a.Transport?i.a.Transport.PPQ:192},i.a.TimeBase.prototype._now=function(){return this.now()},i.a.TimeBase.prototype._frequencyToUnits=function(t){return 1/t},i.a.TimeBase.prototype._beatsToUnits=function(t){return 60/this._getBpm()*t},i.a.TimeBase.prototype._secondsToUnits=function(t){return t},i.a.TimeBase.prototype._ticksToUnits=function(t){return t*(this._beatsToUnits(1)/this._getPPQ())},i.a.TimeBase.prototype._noArg=function(){return this._now()},i.a.TimeBase.prototype.valueOf=function(){if(i.a.isUndef(this._val))return this._noArg();if(i.a.isString(this._val)&&i.a.isUndef(this._units)){for(var t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(i.a.isObject(this._val)){var e=0;for(var n in this._val){var r=this._val[n];e+=new this.constructor(n).valueOf()*r}return e}if(i.a.isDefined(this._units)){var o=this._expressions[this._units],a=this._val.toString().trim().match(o.regexp);return a?o.method.apply(this,a.slice(1)):o.method.call(this,parseFloat(this._val))}return this._val},i.a.TimeBase.prototype.toSeconds=function(){return this.valueOf()},i.a.TimeBase.prototype.toFrequency=function(){return 1/this.toSeconds()},i.a.TimeBase.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},i.a.TimeBase.prototype.toMilliseconds=function(){return 1e3*this.toSeconds()},i.a.TimeBase.prototype.dispose=function(){this._val=null,this._units=null};i.a.TimeBase},function(t,e,n){"use strict";var i=n(0);n(21);i.a.Frequency=function(t,e){if(!(this instanceof i.a.Frequency))return new i.a.Frequency(t,e);i.a.TimeBase.call(this,t,e)},i.a.extend(i.a.Frequency,i.a.TimeBase),i.a.Frequency.prototype._expressions=Object.assign({},i.a.TimeBase.prototype._expressions,{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method:function(t){return"midi"===this._defaultUnits?t:i.a.Frequency.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(t,e){var n=r[t.toLowerCase()]+12*(parseInt(e)+1);return"midi"===this._defaultUnits?n:i.a.Frequency.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,n){var i=1;return t&&"0"!==t&&(i*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(i*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(i*=this._beatsToUnits(parseFloat(n)/4)),i}}}),i.a.Frequency.prototype.transpose=function(t){return new this.constructor(this.valueOf()*i.a.intervalToFrequencyRatio(t))},i.a.Frequency.prototype.harmonize=function(t){return t.map(function(t){return this.transpose(t)}.bind(this))},i.a.Frequency.prototype.toMidi=function(){return i.a.Frequency.ftom(this.valueOf())},i.a.Frequency.prototype.toNote=function(){var t=this.toFrequency(),e=Math.log2(t/i.a.Frequency.A4),n=Math.round(12*e)+57,r=Math.floor(n/12);return r<0&&(n+=-12*r),o[n%12]+r.toString()},i.a.Frequency.prototype.toSeconds=function(){return 1/i.a.TimeBase.prototype.toSeconds.call(this)},i.a.Frequency.prototype.toFrequency=function(){return i.a.TimeBase.prototype.toFrequency.call(this)},i.a.Frequency.prototype.toTicks=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*i.a.Transport.PPQ)},i.a.Frequency.prototype._noArg=function(){return 0},i.a.Frequency.prototype._frequencyToUnits=function(t){return t},i.a.Frequency.prototype._ticksToUnits=function(t){return 1/(60*t/(i.a.Transport.bpm.value*i.a.Transport.PPQ))},i.a.Frequency.prototype._beatsToUnits=function(t){return 1/i.a.TimeBase.prototype._beatsToUnits.call(this,t)},i.a.Frequency.prototype._secondsToUnits=function(t){return 1/t},i.a.Frequency.prototype._defaultUnits="hz";var r={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},o=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];i.a.Frequency.A4=440,i.a.Frequency.mtof=function(t){return i.a.Frequency.A4*Math.pow(2,(t-69)/12)},i.a.Frequency.ftom=function(t){return 69+Math.round(12*Math.log2(t/i.a.Frequency.A4))};i.a.Frequency},function(t,e,n){"use strict";var i=n(0);n(20);i.a.TransportTime=function(t,e){if(!(this instanceof i.a.TransportTime))return new i.a.TransportTime(t,e);i.a.Time.call(this,t,e)},i.a.extend(i.a.TransportTime,i.a.Time),i.a.TransportTime.prototype._now=function(){return i.a.Transport.seconds};i.a.TransportTime},function(t,e,n){"use strict";var i=n(0);n(8);i.a.SignalBase=function(){i.a.AudioNode.call(this)},i.a.extend(i.a.SignalBase,i.a.AudioNode),i.a.SignalBase.prototype.connect=function(t,e,n){return i.a.Signal&&i.a.Signal===t.constructor||i.a.Param&&i.a.Param===t.constructor?(t._param.cancelScheduledValues(0),t._param.setValueAtTime(0,0),t.overridden=!0):t instanceof AudioParam&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0)),i.a.AudioNode.prototype.connect.call(this,t,e,n),this};i.a.SignalBase},function(t,e,n){"use strict";var i=n(0);n(16);function r(t){return function(e,n){n=this.toSeconds(n),t.apply(this,arguments);var i=this._events.get(n),r=this._events.previousEvent(i),o=this._getTicksUntilEvent(r,n);return i.ticks=Math.max(o,0),this}}i.a.TickSignal=function(t){t=i.a.defaultArg(t,1),i.a.Signal.call(this,{units:i.a.Type.Ticks,value:t}),this._events.memory=1/0,this.cancelScheduledValues(0),this._events.add({type:i.a.Param.AutomationType.SetValue,time:0,value:t})},i.a.extend(i.a.TickSignal,i.a.Signal),i.a.TickSignal.prototype.setValueAtTime=r(i.a.Signal.prototype.setValueAtTime),i.a.TickSignal.prototype.linearRampToValueAtTime=r(i.a.Signal.prototype.linearRampToValueAtTime),i.a.TickSignal.prototype.setTargetAtTime=function(t,e,n){e=this.toSeconds(e),this.setRampPoint(e),t=this._fromUnits(t);for(var i=this._events.get(e),r=Math.round(Math.max(1/n,1)),o=0;o<=r;o++){var a=n*o+e,s=this._exponentialApproach(i.time,i.value,t,n,a);this.linearRampToValueAtTime(this._toUnits(s),a)}return this},i.a.TickSignal.prototype.exponentialRampToValueAtTime=function(t,e){e=this.toSeconds(e),t=this._fromUnits(t);for(var n=this._events.get(e),i=Math.round(Math.max(10*(e-n.time),1)),r=(e-n.time)/i,o=0;o<=i;o++){var a=r*o+n.time,s=this._exponentialInterpolate(n.time,n.value,e,t,a);this.linearRampToValueAtTime(this._toUnits(s),a)}return this},i.a.TickSignal.prototype._getTicksUntilEvent=function(t,e){if(null===t)t={ticks:0,time:0};else if(i.a.isUndef(t.ticks)){var n=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(n,t.time)}var r=this.getValueAtTime(t.time),o=this.getValueAtTime(e);return this._events.get(e).time===e&&this._events.get(e).type===i.a.Param.AutomationType.SetValue&&(o=this.getValueAtTime(e-this.sampleTime)),.5*(e-t.time)*(r+o)+t.ticks},i.a.TickSignal.prototype.getTicksAtTime=function(t){t=this.toSeconds(t);var e=this._events.get(t);return Math.max(this._getTicksUntilEvent(e,t),0)},i.a.TickSignal.prototype.getDurationOfTicks=function(t,e){e=this.toSeconds(e);var n=this.getTicksAtTime(e);return this.getTimeOfTick(n+t)-e},i.a.TickSignal.prototype.getTimeOfTick=function(t){var e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&n.type===i.a.Param.AutomationType.Linear&&e.value!==n.value){var r=this.getValueAtTime(e.time),o=(this.getValueAtTime(n.time)-r)/(n.time-e.time),a=Math.sqrt(Math.pow(r,2)-2*o*(e.ticks-t)),s=(-r+a)/o;return(s>0?s:(-r-a)/o)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue},i.a.TickSignal.prototype.ticksToTime=function(t,e){return e=this.toSeconds(e),new i.a.Time(this.getDurationOfTicks(t,e))},i.a.TickSignal.prototype.timeToTicks=function(t,e){e=this.toSeconds(e),t=this.toSeconds(t);var n=this.getTicksAtTime(e),r=this.getTicksAtTime(e+t);return new i.a.Ticks(r-n)};i.a.TickSignal,n(18),n(12),n(17);i.a.TickSource=function(){var t=i.a.defaults(arguments,["frequency"],i.a.TickSource);this.frequency=new i.a.TickSignal(t.frequency),this._readOnly("frequency"),this._state=new i.a.TimelineState(i.a.State.Stopped),this._state.setStateAtTime(i.a.State.Stopped,0),this._tickOffset=new i.a.Timeline,this.setTicksAtTime(0,0)},i.a.extend(i.a.TickSource),i.a.TickSource.defaults={frequency:1},Object.defineProperty(i.a.TickSource.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())}}),i.a.TickSource.prototype.start=function(t,e){return t=this.toSeconds(t),this._state.getValueAtTime(t)!==i.a.State.Started&&(this._state.setStateAtTime(i.a.State.Started,t),i.a.isDefined(e)&&this.setTicksAtTime(e,t)),this},i.a.TickSource.prototype.stop=function(t){if(t=this.toSeconds(t),this._state.getValueAtTime(t)===i.a.State.Stopped){var e=this._state.get(t);e.time>0&&(this._tickOffset.cancel(e.time),this._state.cancel(e.time))}return this._state.cancel(t),this._state.setStateAtTime(i.a.State.Stopped,t),this.setTicksAtTime(0,t),this},i.a.TickSource.prototype.pause=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)===i.a.State.Started&&this._state.setStateAtTime(i.a.State.Paused,t),this},i.a.TickSource.prototype.cancel=function(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this},i.a.TickSource.prototype.getTicksAtTime=function(t){t=this.toSeconds(t);var e=this._state.getLastState(i.a.State.Stopped,t),n={state:i.a.State.Paused,time:t};this._state.add(n);var r=e,o=0;return this._state.forEachBetween(e.time,t+this.sampleTime,function(t){var e=r.time,n=this._tickOffset.get(t.time);n.time>=r.time&&(o=n.ticks,e=n.time),r.state===i.a.State.Started&&t.state!==i.a.State.Started&&(o+=this.frequency.getTicksAtTime(t.time)-this.frequency.getTicksAtTime(e)),r=t}.bind(this)),this._state.remove(n),o},Object.defineProperty(i.a.TickSource.prototype,"ticks",{get:function(){return this.getTicksAtTime(this.now())},set:function(t){this.setTicksAtTime(t,this.now())}}),Object.defineProperty(i.a.TickSource.prototype,"seconds",{get:function(){return this.getSecondsAtTime(this.now())},set:function(t){var e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)}}),i.a.TickSource.prototype.getSecondsAtTime=function(t){t=this.toSeconds(t);var e=this._state.getLastState(i.a.State.Stopped,t),n={state:i.a.State.Paused,time:t};this._state.add(n);var r=e,o=0;return this._state.forEachBetween(e.time,t+this.sampleTime,function(t){var e=r.time,n=this._tickOffset.get(t.time);n.time>=r.time&&(o=n.seconds,e=n.time),r.state===i.a.State.Started&&t.state!==i.a.State.Started&&(o+=t.time-e),r=t}.bind(this)),this._state.remove(n),o},i.a.TickSource.prototype.setTicksAtTime=function(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({time:e,ticks:t,seconds:this.frequency.getDurationOfTicks(t,e)}),this},i.a.TickSource.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},i.a.TickSource.prototype.getTimeOfTick=function(t,e){e=i.a.defaultArg(e,this.now());var n=this._tickOffset.get(e),r=this._state.get(e),o=Math.max(n.time,r.time),a=this.frequency.getTicksAtTime(o)+t-n.ticks;return this.frequency.getTimeOfTick(a)},i.a.TickSource.prototype.forEachTickBetween=function(t,e,n){var r=this._state.get(t);if(this._state.forEachBetween(t,e,function(e){r.state===i.a.State.Started&&e.state!==i.a.State.Started&&this.forEachTickBetween(Math.max(r.time,t),e.time-this.sampleTime,n),r=e}.bind(this)),t=Math.max(r.time,t),r.state===i.a.State.Started&&this._state){var o=this.frequency.getTicksAtTime(t),a=(o-this.frequency.getTicksAtTime(r.time))%1;0!==a&&(a=1-a);for(var s=this.frequency.getTimeOfTick(o+a),u=null;s<e&&this._state;){try{n(s,Math.round(this.getTicksAtTime(s)))}catch(t){u=t;break}this._state&&(s+=this.frequency.getDurationOfTicks(1,s))}}if(u)throw u;return this},i.a.TickSource.prototype.dispose=function(){return i.a.Param.prototype.dispose.call(this),this._state.dispose(),this._state=null,this._tickOffset.dispose(),this._tickOffset=null,this._writable("frequency"),this.frequency.dispose(),this.frequency=null,this};i.a.TickSource},function(t,e,n){"use strict";var i=n(0);n(25),n(18),n(15),n(13);i.a.Clock=function(){var t=i.a.defaults(arguments,["callback","frequency"],i.a.Clock);i.a.Emitter.call(this),this.callback=t.callback,this._nextTick=0,this._tickSource=new i.a.TickSource(t.frequency),this._lastUpdate=0,this.frequency=this._tickSource.frequency,this._readOnly("frequency"),this._state=new i.a.TimelineState(i.a.State.Stopped),this._state.setStateAtTime(i.a.State.Stopped,0),this._boundLoop=this._loop.bind(this),this.context.on("tick",this._boundLoop)},i.a.extend(i.a.Clock,i.a.Emitter),i.a.Clock.defaults={callback:i.a.noOp,frequency:1},Object.defineProperty(i.a.Clock.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())}}),i.a.Clock.prototype.start=function(t,e){return this.context.resume(),t=this.toSeconds(t),this._state.getValueAtTime(t)!==i.a.State.Started&&(this._state.setStateAtTime(i.a.State.Started,t),this._tickSource.start(t,e),t<this._lastUpdate&&this.emit("start",t,e)),this},i.a.Clock.prototype.stop=function(t){return t=this.toSeconds(t),this._state.cancel(t),this._state.setStateAtTime(i.a.State.Stopped,t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this},i.a.Clock.prototype.pause=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)===i.a.State.Started&&(this._state.setStateAtTime(i.a.State.Paused,t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this},Object.defineProperty(i.a.Clock.prototype,"ticks",{get:function(){return Math.ceil(this.getTicksAtTime(this.now()))},set:function(t){this._tickSource.ticks=t}}),Object.defineProperty(i.a.Clock.prototype,"seconds",{get:function(){return this._tickSource.seconds},set:function(t){this._tickSource.seconds=t}}),i.a.Clock.prototype.getSecondsAtTime=function(t){return this._tickSource.getSecondsAtTime(t)},i.a.Clock.prototype.setTicksAtTime=function(t,e){return this._tickSource.setTicksAtTime(t,e),this},i.a.Clock.prototype.getTicksAtTime=function(t){return this._tickSource.getTicksAtTime(t)},i.a.Clock.prototype.nextTickTime=function(t,e){e=this.toSeconds(e);var n=this.getTicksAtTime(e);return this._tickSource.getTimeOfTick(n+t,e)},i.a.Clock.prototype._loop=function(){var t=this._lastUpdate,e=this.now();this._lastUpdate=e,t!==e&&(this._state.forEachBetween(t,e,function(t){switch(t.state){case i.a.State.Started:var e=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,e);break;case i.a.State.Stopped:0!==t.time&&this.emit("stop",t.time);break;case i.a.State.Paused:this.emit("pause",t.time)}}.bind(this)),this._tickSource.forEachTickBetween(t,e,function(t,e){this.callback(t,e)}.bind(this)))},i.a.Clock.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},i.a.Clock.prototype.dispose=function(){i.a.Emitter.prototype.dispose.call(this),this.context.off("tick",this._boundLoop),this._writable("frequency"),this._tickSource.dispose(),this._tickSource=null,this.frequency=null,this._boundLoop=null,this._nextTick=1/0,this.callback=null,this._state.dispose(),this._state=null};i.a.Clock,n(7),n(12),n(14);i.a.IntervalTimeline=function(){i.a.call(this),this._root=null,this._length=0},i.a.extend(i.a.IntervalTimeline),i.a.IntervalTimeline.prototype.add=function(t){if(i.a.isUndef(t.time)||i.a.isUndef(t.duration))throw new Error("Tone.IntervalTimeline: events must have time and duration parameters");t.time=t.time.valueOf();var e=new r(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this},i.a.IntervalTimeline.prototype.remove=function(t){if(null!==this._root){var e=[];this._root.search(t.time,e);for(var n=0;n<e.length;n++){var i=e[n];if(i.event===t){this._removeNode(i),this._length--;break}}}return this},Object.defineProperty(i.a.IntervalTimeline.prototype,"length",{get:function(){return this._length}}),i.a.IntervalTimeline.prototype.cancel=function(t){return this.forEachFrom(t,function(t){this.remove(t)}.bind(this)),this},i.a.IntervalTimeline.prototype._setRoot=function(t){this._root=t,null!==this._root&&(this._root.parent=null)},i.a.IntervalTimeline.prototype._replaceNodeInParent=function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)},i.a.IntervalTimeline.prototype._removeNode=function(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var e,n;if(t.getBalance()>0)if(null===t.left.right)(e=t.left).right=t.right,n=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent.right=e.left,n=e.parent,e.left=t.left,e.right=t.right}else if(null===t.right.left)(e=t.right).left=t.left,n=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent.left=e.right,n=e.parent,e.left=t.left,e.right=t.right}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),this._rebalance(n)}t.dispose()},i.a.IntervalTimeline.prototype._rotateLeft=function(t){var e=t.parent,n=t.isLeftChild(),i=t.right;t.right=i.left,i.left=t,null!==e?n?e.left=i:e.right=i:this._setRoot(i)},i.a.IntervalTimeline.prototype._rotateRight=function(t){var e=t.parent,n=t.isLeftChild(),i=t.left;t.left=i.right,i.right=t,null!==e?n?e.left=i:e.right=i:this._setRoot(i)},i.a.IntervalTimeline.prototype._rebalance=function(t){var e=t.getBalance();e>1?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))},i.a.IntervalTimeline.prototype.get=function(t){if(null!==this._root){var e=[];if(this._root.search(t,e),e.length>0){for(var n=e[0],i=1;i<e.length;i++)e[i].low>n.low&&(n=e[i]);return n.event}}return null},i.a.IntervalTimeline.prototype.forEach=function(t){if(null!==this._root){var e=[];this._root.traverse(function(t){e.push(t)});for(var n=0;n<e.length;n++){var i=e[n].event;i&&t(i)}}return this},i.a.IntervalTimeline.prototype.forEachAtTime=function(t,e){if(null!==this._root){var n=[];this._root.search(t,n);for(var i=n.length-1;i>=0;i--){var r=n[i].event;r&&e(r)}}return this},i.a.IntervalTimeline.prototype.forEachFrom=function(t,e){if(null!==this._root){var n=[];this._root.searchAfter(t,n);for(var i=n.length-1;i>=0;i--){e(n[i].event)}}return this},i.a.IntervalTimeline.prototype.dispose=function(){var t=[];null!==this._root&&this._root.traverse(function(e){t.push(e)});for(var e=0;e<t.length;e++)t[e].dispose();return t=null,this._root=null,this};var r=function(t,e,n){this.event=n,this.low=t,this.high=e,this.max=this.high,this._left=null,this._right=null,this.parent=null,this.height=0};r.prototype.insert=function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)},r.prototype.search=function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))},r.prototype.searchAfter=function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)},r.prototype.traverse=function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)},r.prototype.updateHeight=function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0},r.prototype.updateMax=function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))},r.prototype.getBalance=function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t},r.prototype.isLeftChild=function(){return null!==this.parent&&this.parent.left===this},Object.defineProperty(r.prototype,"left",{get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),Object.defineProperty(r.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),r.prototype.dispose=function(){this.parent=null,this._left=null,this._right=null,this.event=null};i.a.IntervalTimeline,n(23);i.a.Ticks=function(t,e){if(!(this instanceof i.a.Ticks))return new i.a.Ticks(t,e);i.a.TransportTime.call(this,t,e)},i.a.extend(i.a.Ticks,i.a.TransportTime),i.a.Ticks.prototype._defaultUnits="i",i.a.Ticks.prototype._now=function(){return i.a.Transport.ticks},i.a.Ticks.prototype._beatsToUnits=function(t){return this._getPPQ()*t},i.a.Ticks.prototype._secondsToUnits=function(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())},i.a.Ticks.prototype._ticksToUnits=function(t){return t},i.a.Ticks.prototype.toTicks=function(){return this.valueOf()},i.a.Ticks.prototype.toSeconds=function(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())};i.a.Ticks;i.a.TransportEvent=function(t,e){e=i.a.defaultArg(e,i.a.TransportEvent.defaults),i.a.call(this),this.Transport=t,this.id=i.a.TransportEvent._eventId++,this.time=i.a.Ticks(e.time),this.callback=e.callback,this._once=e.once},i.a.extend(i.a.TransportEvent),i.a.TransportEvent.defaults={once:!1,callback:i.a.noOp},i.a.TransportEvent._eventId=0,i.a.TransportEvent.prototype.invoke=function(t){this.callback&&(this.callback(t),this._once&&this.Transport&&this.Transport.clear(this.id))},i.a.TransportEvent.prototype.dispose=function(){return i.a.prototype.dispose.call(this),this.Transport=null,this.callback=null,this.time=null,this};i.a.TransportEvent;i.a.TransportRepeatEvent=function(t,e){i.a.TransportEvent.call(this,t,e),e=i.a.defaultArg(e,i.a.TransportRepeatEvent.defaults),this.duration=i.a.Ticks(e.duration),this._interval=i.a.Ticks(e.interval),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this),this.Transport.on("start loopStart",this._boundRestart),this._restart()},i.a.extend(i.a.TransportRepeatEvent,i.a.TransportEvent),i.a.TransportRepeatEvent.defaults={duration:1/0,interval:1},i.a.TransportRepeatEvent.prototype.invoke=function(t){this._createEvents(t),i.a.TransportEvent.prototype.invoke.call(this,t)},i.a.TransportRepeatEvent.prototype._createEvents=function(t){var e=this.Transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.Transport.scheduleOnce(this.invoke.bind(this),i.a.Ticks(this._nextTick)))},i.a.TransportRepeatEvent.prototype._restart=function(t){this.Transport.clear(this._currentId),this.Transport.clear(this._nextId),this._nextTick=this.time;var e=this.Transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.Transport.scheduleOnce(this.invoke.bind(this),i.a.Ticks(this._nextTick)),this._nextTick+=this._interval,this._nextId=this.Transport.scheduleOnce(this.invoke.bind(this),i.a.Ticks(this._nextTick))},i.a.TransportRepeatEvent.prototype.dispose=function(){return this.Transport.clear(this._currentId),this.Transport.clear(this._nextId),this.Transport.off("start loopStart",this._boundRestart),this._boundCreateEvents=null,i.a.TransportEvent.prototype.dispose.call(this),this.duration=null,this._interval=null,this};i.a.TransportRepeatEvent;i.a.Transport=function(){i.a.Emitter.call(this),i.a.getContext(function(){this.loop=!1,this._loopStart=0,this._loopEnd=0,this._ppq=o.defaults.PPQ,this._clock=new i.a.Clock({callback:this._processTick.bind(this),frequency:0}),this._bindClockEvents(),this.bpm=this._clock.frequency,this.bpm._toUnits=this._toUnits.bind(this),this.bpm._fromUnits=this._fromUnits.bind(this),this.bpm.units=i.a.Type.BPM,this.bpm.value=o.defaults.bpm,this._readOnly("bpm"),this._timeSignature=o.defaults.timeSignature,this._scheduledEvents={},this._timeline=new i.a.Timeline,this._repeatedEvents=new i.a.IntervalTimeline,this._syncedSignals=[],this._swingTicks=o.defaults.PPQ/2,this._swingAmount=0,this.context.transport=this}.bind(this))},i.a.extend(i.a.Transport,i.a.Emitter),i.a.Transport.defaults={bpm:120,swing:0,swingSubdivision:"8n",timeSignature:4,loopStart:0,loopEnd:"4m",PPQ:192},i.a.Transport.prototype.isTransport=!0,i.a.Transport.prototype._processTick=function(t,e){if(this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){var n=e%(2*this._swingTicks)/(2*this._swingTicks),r=Math.sin(n*Math.PI)*this._swingAmount;t+=i.a.Ticks(2*this._swingTicks/3).toSeconds()*r}this.loop&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._timeline.forEachAtTime(e,function(e){e.invoke(t)})},i.a.Transport.prototype.schedule=function(t,e){var n=new i.a.TransportEvent(this,{time:i.a.TransportTime(e),callback:t});return this._addEvent(n,this._timeline)},i.a.Transport.prototype.scheduleRepeat=function(t,e,n,r){var o=new i.a.TransportRepeatEvent(this,{callback:t,interval:i.a.Time(e),time:i.a.TransportTime(n),duration:i.a.Time(i.a.defaultArg(r,1/0))});return this._addEvent(o,this._repeatedEvents)},i.a.Transport.prototype.scheduleOnce=function(t,e){var n=new i.a.TransportEvent(this,{time:i.a.TransportTime(e),callback:t,once:!0});return this._addEvent(n,this._timeline)},i.a.Transport.prototype.clear=function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this},i.a.Transport.prototype._addEvent=function(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id},i.a.Transport.prototype.cancel=function(t){return t=i.a.defaultArg(t,0),t=this.toTicks(t),this._timeline.forEachFrom(t,function(t){this.clear(t.id)}.bind(this)),this._repeatedEvents.forEachFrom(t,function(t){this.clear(t.id)}.bind(this)),this},i.a.Transport.prototype._bindClockEvents=function(){this._clock.on("start",function(t,e){e=i.a.Ticks(e).toSeconds(),this.emit("start",t,e)}.bind(this)),this._clock.on("stop",function(t){this.emit("stop",t)}.bind(this)),this._clock.on("pause",function(t){this.emit("pause",t)}.bind(this))},Object.defineProperty(i.a.Transport.prototype,"state",{get:function(){return this._clock.getStateAtTime(this.now())}}),i.a.Transport.prototype.start=function(t,e){return i.a.isDefined(e)&&(e=this.toTicks(e)),this._clock.start(t,e),this},i.a.Transport.prototype.stop=function(t){return this._clock.stop(t),this},i.a.Transport.prototype.pause=function(t){return this._clock.pause(t),this},i.a.Transport.prototype.toggle=function(t){return t=this.toSeconds(t),this._clock.getStateAtTime(t)!==i.a.State.Started?this.start(t):this.stop(t),this},Object.defineProperty(i.a.Transport.prototype,"timeSignature",{get:function(){return this._timeSignature},set:function(t){i.a.isArray(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}}),Object.defineProperty(i.a.Transport.prototype,"loopStart",{get:function(){return i.a.Ticks(this._loopStart).toSeconds()},set:function(t){this._loopStart=this.toTicks(t)}}),Object.defineProperty(i.a.Transport.prototype,"loopEnd",{get:function(){return i.a.Ticks(this._loopEnd).toSeconds()},set:function(t){this._loopEnd=this.toTicks(t)}}),i.a.Transport.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(i.a.Transport.prototype,"swing",{get:function(){return this._swingAmount},set:function(t){this._swingAmount=t}}),Object.defineProperty(i.a.Transport.prototype,"swingSubdivision",{get:function(){return i.a.Ticks(this._swingTicks).toNotation()},set:function(t){this._swingTicks=this.toTicks(t)}}),Object.defineProperty(i.a.Transport.prototype,"position",{get:function(){var t=this.now(),e=this._clock.getTicksAtTime(t);return i.a.Ticks(e).toBarsBeatsSixteenths()},set:function(t){var e=this.toTicks(t);this.ticks=e}}),Object.defineProperty(i.a.Transport.prototype,"seconds",{get:function(){return this._clock.seconds},set:function(t){var e=this.now(),n=this.bpm.timeToTicks(t,e);this.ticks=n}}),Object.defineProperty(i.a.Transport.prototype,"progress",{get:function(){if(this.loop){var t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}}),Object.defineProperty(i.a.Transport.prototype,"ticks",{get:function(){return this._clock.ticks},set:function(t){if(this._clock.ticks!==t){var e=this.now();this.state===i.a.State.Started?(this.emit("stop",e),this._clock.setTicksAtTime(t,e),this.emit("start",e,this.seconds)):this._clock.setTicksAtTime(t,e)}}}),i.a.Transport.prototype.getTicksAtTime=function(t){return Math.round(this._clock.getTicksAtTime(t))},i.a.Transport.prototype.getSecondsAtTime=function(t){return this._clock.getSecondsAtTime(t)},Object.defineProperty(i.a.Transport.prototype,"PPQ",{get:function(){return this._ppq},set:function(t){var e=this.bpm.value;this._ppq=t,this.bpm.value=e}}),i.a.Transport.prototype._fromUnits=function(t){return 1/(60/t/this.PPQ)},i.a.Transport.prototype._toUnits=function(t){return t/this.PPQ*60},i.a.Transport.prototype.nextSubdivision=function(t){if(t=this.toTicks(t),this.state!==i.a.State.Started)return 0;var e=this.now(),n=t-this.getTicksAtTime(e)%t;return this._clock.nextTickTime(n,e)},i.a.Transport.prototype.syncSignal=function(t,e){if(!e){var n=this.now();e=0!==t.getValueAtTime(n)?t.getValueAtTime(n)/this.bpm.getValueAtTime(n):0}var r=new i.a.Gain(e);return this.bpm.chain(r,t._param),this._syncedSignals.push({ratio:r,signal:t,initial:t.value}),t.value=0,this},i.a.Transport.prototype.unsyncSignal=function(t){for(var e=this._syncedSignals.length-1;e>=0;e--){var n=this._syncedSignals[e];n.signal===t&&(n.ratio.dispose(),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this},i.a.Transport.prototype.dispose=function(){return i.a.Emitter.prototype.dispose.call(this),this._clock.dispose(),this._clock=null,this._writable("bpm"),this.bpm=null,this._timeline.dispose(),this._timeline=null,this._repeatedEvents.dispose(),this._repeatedEvents=null,this};var o=i.a.Transport;i.a.Transport=new o,i.a.Context.on("init",function(t){t.transport&&t.transport.isTransport?i.a.Transport=t.transport:i.a.Transport=new o}),i.a.Context.on("close",function(t){t.transport&&t.transport.isTransport&&t.transport.dispose()});e.a=i.a.Transport},function(t,e,n){"use strict";e.a="13.8.25"},function(t,e,n){"use strict";n.r(e);var i=n(11),r=n(1),o=n(10),a=n(3),s=n(2),u=n(5),c=n(0);var l=n(9);var h={playNotes:function(t,e){var n=this;Object(l.a)(t),t.forEach(function(t){return n.play(t,e)})},playMelodically:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.3,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=c.a.context;t.forEach(function(t,r){o.setTimeout(function(){return n.play(t,e)},r*i)}),r&&o.setTimeout(function(){return n.play(u.Note.builder(t[0]).interval(12).raw,e)},t.length*i)}};n(15),n(7);c.a.supported&&(AudioBuffer.prototype.copyToChannel||(AudioBuffer.prototype.copyToChannel=function(t,e,n){var i=this.getChannelData(e);n=n||0;for(var r=0;r<i.length;r++)i[r+n]=t[r]},AudioBuffer.prototype.copyFromChannel=function(t,e,n){var i=this.getChannelData(e);n=n||0;for(var r=0;r<t.length;r++)t[r]=i[r+n]})),c.a.Buffer=function(){var t=c.a.defaults(arguments,["url","onload","onerror"],c.a.Buffer);c.a.call(this),this._buffer=null,this._reversed=t.reverse,this._xhr=null,this.onload=c.a.noOp,t.url instanceof AudioBuffer||t.url instanceof c.a.Buffer?(this.set(t.url),this.loaded||(this.onload=t.onload)):c.a.isString(t.url)&&this.load(t.url).then(t.onload).catch(t.onerror)},c.a.extend(c.a.Buffer),c.a.Buffer.defaults={url:void 0,reverse:!1,onload:c.a.noOp,onerror:c.a.noOp},c.a.Buffer.prototype.set=function(t){return t instanceof c.a.Buffer?t.loaded?this._buffer=t.get():t.onload=function(){this.set(t),this.onload(this)}.bind(this):this._buffer=t,this._reversed&&this._reverse(),this},c.a.Buffer.prototype.get=function(){return this._buffer},c.a.Buffer.prototype.load=function(t,e,n){return new Promise(function(i,r){this._xhr=c.a.Buffer.load(t,function(t){this._xhr=null,this.set(t),i(this),this.onload(this),e&&e(this)}.bind(this),function(t){this._xhr=null,r(t),n&&n(t)}.bind(this))}.bind(this))},c.a.Buffer.prototype.dispose=function(){return c.a.prototype.dispose.call(this),this._buffer=null,this._xhr&&(c.a.Buffer._removeFromDownloadQueue(this._xhr),this._xhr.abort(),this._xhr=null),this},Object.defineProperty(c.a.Buffer.prototype,"loaded",{get:function(){return this.length>0}}),Object.defineProperty(c.a.Buffer.prototype,"duration",{get:function(){return this._buffer?this._buffer.duration:0}}),Object.defineProperty(c.a.Buffer.prototype,"length",{get:function(){return this._buffer?this._buffer.length:0}}),Object.defineProperty(c.a.Buffer.prototype,"numberOfChannels",{get:function(){return this._buffer?this._buffer.numberOfChannels:0}}),c.a.Buffer.prototype.fromArray=function(t){var e=t[0].length>0,n=e?t.length:1,i=e?t[0].length:t.length,r=this.context.createBuffer(n,i,this.context.sampleRate);e||1!==n||(t=[t]);for(var o=0;o<n;o++)r.copyToChannel(t[o],o);return this._buffer=r,this},c.a.Buffer.prototype.toMono=function(t){if(c.a.isNumber(t))this.fromArray(this.toArray(t));else{for(var e=new Float32Array(this.length),n=this.numberOfChannels,i=0;i<n;i++)for(var r=this.toArray(i),o=0;o<r.length;o++)e[o]+=r[o];e=e.map(function(t){return t/n}),this.fromArray(e)}return this},c.a.Buffer.prototype.toArray=function(t){if(c.a.isNumber(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);for(var e=[],n=0;n<this.numberOfChannels;n++)e[n]=this.getChannelData(n);return e},c.a.Buffer.prototype.getChannelData=function(t){return this._buffer.getChannelData(t)},c.a.Buffer.prototype.slice=function(t,e){e=c.a.defaultArg(e,this.duration);for(var n=Math.floor(this.context.sampleRate*this.toSeconds(t)),i=Math.floor(this.context.sampleRate*this.toSeconds(e)),r=[],o=0;o<this.numberOfChannels;o++)r[o]=this.toArray(o).slice(n,i);return(new c.a.Buffer).fromArray(r)},c.a.Buffer.prototype._reverse=function(){if(this.loaded)for(var t=0;t<this.numberOfChannels;t++)Array.prototype.reverse.call(this.getChannelData(t));return this},Object.defineProperty(c.a.Buffer.prototype,"reverse",{get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())}}),c.a.Emitter.mixin(c.a.Buffer),c.a.Buffer._downloadQueue=[],c.a.Buffer.baseUrl="",c.a.Buffer.fromArray=function(t){return(new c.a.Buffer).fromArray(t)},c.a.Buffer.fromUrl=function(t){var e=new c.a.Buffer;return e.load(t).then(function(){return e})},c.a.Buffer._removeFromDownloadQueue=function(t){var e=c.a.Buffer._downloadQueue.indexOf(t);-1!==e&&c.a.Buffer._downloadQueue.splice(e,1)},c.a.Buffer.load=function(t,e,n){e=c.a.defaultArg(e,c.a.noOp);var i=t.match(/\[(.+\|?)+\]$/);if(i){for(var r=i[1].split("|"),o=r[0],a=0;a<r.length;a++)if(c.a.Buffer.supportsType(r[a])){o=r[a];break}t=t.replace(i[0],o)}function s(t){if(c.a.Buffer._removeFromDownloadQueue(l),c.a.Buffer.emit("error",t),!n)throw t;n(t)}function u(){for(var t=0,e=0;e<c.a.Buffer._downloadQueue.length;e++)t+=c.a.Buffer._downloadQueue[e].progress;c.a.Buffer.emit("progress",t/c.a.Buffer._downloadQueue.length)}var l=new XMLHttpRequest;return l.open("GET",c.a.Buffer.baseUrl+t,!0),l.responseType="arraybuffer",l.progress=0,c.a.Buffer._downloadQueue.push(l),l.addEventListener("load",function(){200===l.status?c.a.context.decodeAudioData(l.response).then(function(t){l.progress=1,u(),e(t),c.a.Buffer._removeFromDownloadQueue(l),0===c.a.Buffer._downloadQueue.length&&c.a.Buffer.emit("load")}).catch(function(){c.a.Buffer._removeFromDownloadQueue(l),s("Tone.Buffer: could not decode audio data: "+t)}):s("Tone.Buffer: could not locate file: "+t)}),l.addEventListener("error",s),l.addEventListener("progress",function(t){t.lengthComputable&&(l.progress=t.loaded/t.total*.95,u())}),l.send(),l},c.a.Buffer.cancelDownloads=function(){return c.a.Buffer._downloadQueue.slice().forEach(function(t){c.a.Buffer._removeFromDownloadQueue(t),t.abort()}),c.a.Buffer},c.a.Buffer.supportsType=function(t){var e=t.split(".");return e=e[e.length-1],""!==document.createElement("audio").canPlayType("audio/"+e)},c.a.loaded=function(){var t,e;function n(){c.a.Buffer.off("load",t),c.a.Buffer.off("error",e)}return new Promise(function(n,i){t=function(){n()},e=function(){i()},c.a.Buffer.on("load",t),c.a.Buffer.on("error",e)}).then(n).catch(function(t){throw n(),new Error(t)})};c.a.Buffer,n(26),n(16),n(14),n(8);c.a.Volume=function(){var t=c.a.defaults(arguments,["volume"],c.a.Volume);c.a.AudioNode.call(this,t),this.output=this.input=new c.a.Gain(t.volume,c.a.Type.Decibels),this._unmutedVolume=t.volume,this.volume=this.output.gain,this._readOnly("volume"),this.mute=t.mute},c.a.extend(c.a.Volume,c.a.AudioNode),c.a.Volume.defaults={volume:0,mute:!1},Object.defineProperty(c.a.Volume.prototype,"mute",{get:function(){return this.volume.value===-1/0},set:function(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}}),c.a.Volume.prototype.dispose=function(){return this.input.dispose(),c.a.AudioNode.prototype.dispose.call(this),this._writable("volume"),this.volume.dispose(),this.volume=null,this};c.a.Volume,n(13);c.a.Master=function(){c.a.AudioNode.call(this),c.a.getContext(function(){this.createInsOuts(1,0),this._volume=this.output=new c.a.Volume,this.volume=this._volume.volume,this._readOnly("volume"),c.a.connectSeries(this.input,this.output,this.context.destination),this.context.master=this}.bind(this))},c.a.extend(c.a.Master,c.a.AudioNode),c.a.Master.defaults={volume:0,mute:!1},c.a.Master.prototype.isMaster=!0,Object.defineProperty(c.a.Master.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),c.a.Master.prototype.chain=function(){this.input.disconnect();var t=Array.from(arguments);t.unshift(this.input),t.push(this.output),c.a.connectSeries.apply(void 0,t)},c.a.Master.prototype.dispose=function(){c.a.AudioNode.prototype.dispose.call(this),this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null},c.a.AudioNode.prototype.toMaster=function(){return this.connect(this.context.master),this};var p=c.a.Master;c.a.Master=new p,c.a.Context.on("init",function(t){t.master&&t.master.isMaster?c.a.Master=t.master:c.a.Master=new p}),c.a.Context.on("close",function(t){t.master&&t.master.isMaster&&t.master.dispose()});c.a.Master,n(18);c.a.Source=function(t){t=c.a.defaultArg(t,c.a.Source.defaults),c.a.AudioNode.call(this),this._volume=this.output=new c.a.Volume(t.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._state=new c.a.TimelineState(c.a.State.Stopped),this._state.memory=100,this._synced=!1,this._scheduled=[],this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode="explicit",this.mute=t.mute},c.a.extend(c.a.Source,c.a.AudioNode),c.a.Source.defaults={volume:0,mute:!1},Object.defineProperty(c.a.Source.prototype,"state",{get:function(){return this._synced?c.a.Transport.state===c.a.State.Started?this._state.getValueAtTime(c.a.Transport.seconds):c.a.State.Stopped:this._state.getValueAtTime(this.now())}}),Object.defineProperty(c.a.Source.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),c.a.Source.prototype._start=c.a.noOp,c.a.Source.prototype.restart=c.a.noOp,c.a.Source.prototype._stop=c.a.noOp,c.a.Source.prototype.start=function(t,e,n){if(c.a.isUndef(t)&&this._synced?t=c.a.Transport.seconds:(t=this.toSeconds(t),t=Math.max(t,this.context.currentTime)),this._state.getValueAtTime(t)===c.a.State.Started)this._state.cancel(t),this._state.setStateAtTime(c.a.State.Started,t),this.restart(t,e,n);else if(this._state.setStateAtTime(c.a.State.Started,t),this._synced){var i=this._state.get(t);i.offset=c.a.defaultArg(e,0),i.duration=n;var r=c.a.Transport.schedule(function(t){this._start(t,e,n)}.bind(this),t);this._scheduled.push(r),c.a.Transport.state===c.a.State.Started&&this._syncedStart(this.now(),c.a.Transport.seconds)}else this._start.apply(this,arguments);return this},c.a.Source.prototype.stop=function(t){if(c.a.isUndef(t)&&this._synced?t=c.a.Transport.seconds:(t=this.toSeconds(t),t=Math.max(t,this.context.currentTime)),this._synced){var e=c.a.Transport.schedule(this._stop.bind(this),t);this._scheduled.push(e)}else this._stop.apply(this,arguments);return this._state.cancel(t),this._state.setStateAtTime(c.a.State.Stopped,t),this},c.a.Source.prototype.sync=function(){return this._synced=!0,this._syncedStart=function(t,e){if(e>0){var n=this._state.get(e);if(n&&n.state===c.a.State.Started&&n.time!==e){var i,r=e-this.toSeconds(n.time);n.duration&&(i=this.toSeconds(n.duration)-r),this._start(t,this.toSeconds(n.offset)+r,i)}}}.bind(this),this._syncedStop=function(t){var e=c.a.Transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));this._state.getValueAtTime(e)===c.a.State.Started&&this._stop(t)}.bind(this),c.a.Transport.on("start loopStart",this._syncedStart),c.a.Transport.on("stop pause loopEnd",this._syncedStop),this},c.a.Source.prototype.unsync=function(){this._synced&&(c.a.Transport.off("stop pause loopEnd",this._syncedStop),c.a.Transport.off("start loopStart",this._syncedStart)),this._synced=!1;for(var t=0;t<this._scheduled.length;t++){var e=this._scheduled[t];c.a.Transport.clear(e)}return this._scheduled=[],this._state.cancel(0),this},c.a.Source.prototype.dispose=function(){c.a.AudioNode.prototype.dispose.call(this),this.unsync(),this._scheduled=null,this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null,this._state.dispose(),this._state=null};c.a.Source,n(25);c.a.BufferSource=function(){var t=c.a.defaults(arguments,["buffer","onload"],c.a.BufferSource);c.a.AudioNode.call(this,t),this.onended=t.onended,this._startTime=-1,this._sourceStarted=!1,this._sourceStopped=!1,this._stopTime=-1,this._gainNode=this.output=new c.a.Gain(0),this._source=this.context.createBufferSource(),c.a.connect(this._source,this._gainNode),this._source.onended=this._onended.bind(this),this._buffer=new c.a.Buffer(t.buffer,t.onload),this.playbackRate=new c.a.Param({param:this._source.playbackRate,units:c.a.Type.Positive,value:t.playbackRate}),this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut,this.curve=t.curve,this._onendedTimeout=-1,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd},c.a.extend(c.a.BufferSource,c.a.AudioNode),c.a.BufferSource.defaults={onended:c.a.noOp,onload:c.a.noOp,loop:!1,loopStart:0,loopEnd:0,fadeIn:0,fadeOut:0,curve:"linear",playbackRate:1},Object.defineProperty(c.a.BufferSource.prototype,"state",{get:function(){return this.getStateAtTime(this.now())}}),c.a.BufferSource.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),-1!==this._startTime&&this._startTime<=t&&(-1===this._stopTime||t<this._stopTime)&&!this._sourceStopped?c.a.State.Started:c.a.State.Stopped},c.a.BufferSource.prototype.start=function(t,e,n,i){this.log("start",t,e,n,i),this.assert(-1===this._startTime,"can only be started once"),this.assert(this.buffer.loaded,"buffer is either not set or not loaded"),this.assert(!this._sourceStopped,"source is already stopped"),t=this.toSeconds(t),e=this.loop?c.a.defaultArg(e,this.loopStart):c.a.defaultArg(e,0),e=this.toSeconds(e),e=Math.max(e,0),i=c.a.defaultArg(i,1);var r=this.toSeconds(this.fadeIn);if(r>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this.curve?this._gainNode.gain.linearRampToValueAtTime(i,t+r):this._gainNode.gain.exponentialApproachValueAtTime(i,t,r)):this._gainNode.gain.setValueAtTime(i,t),this._startTime=t,c.a.isDefined(n)){var o=this.toSeconds(n);o=Math.max(o,0),this.stop(t+o)}if(this.loop){var a=this.loopEnd||this.buffer.duration,s=this.loopStart;e>=a&&(e=(e-s)%(a-s)+s)}return this._source.buffer=this.buffer.get(),this._source.loopEnd=this.loopEnd||this.buffer.duration,e<this.buffer.duration&&(this._sourceStarted=!0,this._source.start(t,e)),this},c.a.BufferSource.prototype.stop=function(t){this.log("stop",t),this.assert(this.buffer.loaded,"buffer is either not set or not loaded"),this.assert(!this._sourceStopped,"source is already stopped"),t=this.toSeconds(t),-1!==this._stopTime&&this.cancelStop();var e=this.toSeconds(this.fadeOut);return this._stopTime=t+e,e>0?"linear"===this.curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),c.a.context.clearTimeout(this._onendedTimeout),this._onendedTimeout=c.a.context.setTimeout(this._onended.bind(this),this._stopTime-this.now()),this},c.a.BufferSource.prototype.cancelStop=function(){if(-1!==this._startTime&&!this._sourceStopped){var t=this.toSeconds(this.fadeIn);this._gainNode.gain.cancelScheduledValues(this._startTime+t+this.sampleTime),this.context.clearTimeout(this._onendedTimeout),this._stopTime=-1}return this},c.a.BufferSource.prototype._onended=function(){if(!this._sourceStopped){this._sourceStopped=!0;var t="exponential"===this.curve?2*this.fadeOut:0;this._sourceStarted&&-1!==this._stopTime&&this._source.stop(this._stopTime+t),this.onended(this),setTimeout(function(){this._source&&(this._source.disconnect(),this._gainNode.disconnect())}.bind(this),1e3*t+100)}},Object.defineProperty(c.a.BufferSource.prototype,"loopStart",{get:function(){return this._source.loopStart},set:function(t){this._source.loopStart=this.toSeconds(t)}}),Object.defineProperty(c.a.BufferSource.prototype,"loopEnd",{get:function(){return this._source.loopEnd},set:function(t){this._source.loopEnd=this.toSeconds(t)}}),Object.defineProperty(c.a.BufferSource.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)}}),Object.defineProperty(c.a.BufferSource.prototype,"loop",{get:function(){return this._source.loop},set:function(t){this._source.loop=t,this.cancelStop()}}),c.a.BufferSource.prototype.dispose=function(){return this._wasDisposed||(this._wasDisposed=!0,c.a.AudioNode.prototype.dispose.call(this),this.onended=null,this._source.onended=null,this._source.disconnect(),this._source=null,this._gainNode.dispose(),this._gainNode=null,this._buffer.dispose(),this._buffer=null,this._startTime=-1,this.playbackRate=null,c.a.context.clearTimeout(this._onendedTimeout)),this};c.a.BufferSource;c.a.Player=function(t){var e;t instanceof c.a.Buffer&&t.loaded?(t=t.get(),e=c.a.Player.defaults):e=c.a.defaults(arguments,["url","onload"],c.a.Player),c.a.Source.call(this,e),this.autostart=e.autostart,this._buffer=new c.a.Buffer({url:e.url,onload:this._onload.bind(this,e.onload),reverse:e.reverse}),t instanceof AudioBuffer&&this._buffer.set(t),this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this._activeSources=[],this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut},c.a.extend(c.a.Player,c.a.Source),c.a.Player.defaults={onload:c.a.noOp,playbackRate:1,loop:!1,autostart:!1,loopStart:0,loopEnd:0,reverse:!1,fadeIn:0,fadeOut:0},c.a.Player.prototype.load=function(t,e){return this._buffer.load(t,this._onload.bind(this,e))},c.a.Player.prototype._onload=function(t){(t=c.a.defaultArg(t,c.a.noOp))(this),this.autostart&&this.start()},c.a.Player.prototype._onSourceEnd=function(t){var e=this._activeSources.indexOf(t);this._activeSources.splice(e,1),0!==this._activeSources.length||this._synced||this._state.setStateAtTime(c.a.State.Stopped,c.a.now())},c.a.Player.prototype._start=function(t,e,n){e=this._loop?c.a.defaultArg(e,this._loopStart):c.a.defaultArg(e,0),e=this.toSeconds(e),this._synced&&(e*=this._playbackRate);var i=c.a.defaultArg(n,Math.max(this._buffer.duration-e,0));i=this.toSeconds(i),i/=this._playbackRate,t=this.toSeconds(t);var r=new c.a.BufferSource({buffer:this._buffer,loop:this._loop,loopStart:this._loopStart,loopEnd:this._loopEnd,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate,fadeIn:this.fadeIn,fadeOut:this.fadeOut}).connect(this.output);return this._loop||this._synced||this._state.setStateAtTime(c.a.State.Stopped,t+i),this._activeSources.push(r),this._loop&&c.a.isUndef(n)?r.start(t,e):r.start(t,e,i-this.toSeconds(this.fadeOut)),this},c.a.Player.prototype._stop=function(t){return t=this.toSeconds(t),this._activeSources.forEach(function(e){e.stop(t)}),this},c.a.Player.prototype.restart=function(t,e,n){return this._stop(t),this._start(t,e,n),this},c.a.Player.prototype.seek=function(t,e){return e=this.toSeconds(e),this._state.getValueAtTime(e)===c.a.State.Started&&(t=this.toSeconds(t),this._stop(e),this._start(e,t)),this},c.a.Player.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(c.a.Player.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=t,this._activeSources.forEach(function(e){e.loopStart=t})}}),Object.defineProperty(c.a.Player.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this._activeSources.forEach(function(e){e.loopEnd=t})}}),Object.defineProperty(c.a.Player.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)}}),Object.defineProperty(c.a.Player.prototype,"loop",{get:function(){return this._loop},set:function(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(function(e){e.loop=t}),t)){var e=this._state.getNextState(c.a.State.Stopped,this.now());e&&this._state.cancel(e.time)}}}),Object.defineProperty(c.a.Player.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t;var e=this.now(),n=this._state.getNextState(c.a.State.Stopped,e);n&&this._state.cancel(n.time),this._activeSources.forEach(function(n){n.cancelStop(),n.playbackRate.setValueAtTime(t,e)})}}),Object.defineProperty(c.a.Player.prototype,"reverse",{get:function(){return this._buffer.reverse},set:function(t){this._buffer.reverse=t}}),Object.defineProperty(c.a.Player.prototype,"loaded",{get:function(){return this._buffer.loaded}}),c.a.Player.prototype.dispose=function(){return this._activeSources.forEach(function(t){t.dispose()}),this._activeSources=null,c.a.Source.prototype.dispose.call(this),this._buffer.dispose(),this._buffer=null,this};c.a.Player;c.a.Players=function(t){var e=Array.prototype.slice.call(arguments);e.shift();var n=c.a.defaults(e,["onload"],c.a.Players);for(var i in c.a.AudioNode.call(this,n),this._volume=this.output=new c.a.Volume(n.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode="explicit",this.mute=n.mute,this._players={},this._loadingCount=0,this._fadeIn=n.fadeIn,this._fadeOut=n.fadeOut,t)this._loadingCount++,this.add(i,t[i],this._bufferLoaded.bind(this,n.onload))},c.a.extend(c.a.Players,c.a.AudioNode),c.a.Players.defaults={volume:0,mute:!1,onload:c.a.noOp,fadeIn:0,fadeOut:0},c.a.Players.prototype._bufferLoaded=function(t){this._loadingCount--,0===this._loadingCount&&t&&t(this)},Object.defineProperty(c.a.Players.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),Object.defineProperty(c.a.Players.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(t){this._fadeIn=t,this._forEach(function(e){e.fadeIn=t})}}),Object.defineProperty(c.a.Players.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(t){this._fadeOut=t,this._forEach(function(e){e.fadeOut=t})}}),Object.defineProperty(c.a.Players.prototype,"state",{get:function(){var t=!1;return this._forEach(function(e){t=t||e.state===c.a.State.Started}),t?c.a.State.Started:c.a.State.Stopped}}),c.a.Players.prototype.has=function(t){return this._players.hasOwnProperty(t)},c.a.Players.prototype.get=function(t){if(this.has(t))return this._players[t];throw new Error("Tone.Players: no player named "+t)},c.a.Players.prototype._forEach=function(t){for(var e in this._players)t(this._players[e],e);return this},Object.defineProperty(c.a.Players.prototype,"loaded",{get:function(){var t=!0;return this._forEach(function(e){t=t&&e.loaded}),t}}),c.a.Players.prototype.add=function(t,e,n){return this._players[t]=new c.a.Player(e,n).connect(this.output),this._players[t].fadeIn=this._fadeIn,this._players[t].fadeOut=this._fadeOut,this},c.a.Players.prototype.stopAll=function(t){this._forEach(function(e){e.stop(t)})},c.a.Players.prototype.dispose=function(){return c.a.AudioNode.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable("volume"),this.volume=null,this.output=null,this._forEach(function(t){t.dispose()}),this._players=null,this};var f=c.a.Players;n(24),n(19);if(c.a.supported&&!c.a.global.AudioContext.prototype._native_createWaveShaper){var d=navigator.userAgent.toLowerCase();if(d.includes("safari")&&!d.includes("chrome")){var y=function(t){for(var e in this._internalNode=this.input=this.output=t._native_createWaveShaper(),this._curve=null,this._internalNode)this._defineProperty(this._internalNode,e)};Object.defineProperty(y.prototype,"curve",{get:function(){return this._curve},set:function(t){this._curve=t;var e=new Float32Array(t.length+1);e.set(t,1),e[0]=t[0],this._internalNode.curve=e}}),y.prototype._defineProperty=function(t,e){c.a.isUndef(this[e])&&Object.defineProperty(this,e,{get:function(){return"function"==typeof t[e]?t[e].bind(t):t[e]},set:function(n){t[e]=n}})},c.a.global.AudioContext.prototype._native_createWaveShaper=c.a.global.AudioContext.prototype.createWaveShaper,c.a.global.AudioContext.prototype.createWaveShaper=function(){return new y(this)}}}c.a.WaveShaper=function(t,e){c.a.SignalBase.call(this),this._shaper=this.input=this.output=this.context.createWaveShaper(),this._curve=null,Array.isArray(t)?this.curve=t:isFinite(t)||c.a.isUndef(t)?this._curve=new Float32Array(c.a.defaultArg(t,1024)):c.a.isFunction(t)&&(this._curve=new Float32Array(c.a.defaultArg(e,1024)),this.setMap(t))},c.a.extend(c.a.WaveShaper,c.a.SignalBase),c.a.WaveShaper.prototype.setMap=function(t){for(var e=new Array(this._curve.length),n=0,i=this._curve.length;n<i;n++){var r=n/(i-1)*2-1;e[n]=t(r,n)}return this.curve=e,this},Object.defineProperty(c.a.WaveShaper.prototype,"curve",{get:function(){return this._shaper.curve},set:function(t){this._curve=new Float32Array(t),this._shaper.curve=this._curve}}),Object.defineProperty(c.a.WaveShaper.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){if(!["none","2x","4x"].includes(t))throw new RangeError("Tone.WaveShaper: oversampling must be either 'none', '2x', or '4x'");this._shaper.oversample=t}}),c.a.WaveShaper.prototype.dispose=function(){return c.a.SignalBase.prototype.dispose.call(this),this._shaper.disconnect(),this._shaper=null,this._curve=null,this};c.a.WaveShaper;c.a.Pow=function(t){c.a.SignalBase.call(this),this._exp=c.a.defaultArg(t,1),this._expScaler=this.input=this.output=new c.a.WaveShaper(this._expFunc(this._exp),8192)},c.a.extend(c.a.Pow,c.a.SignalBase),Object.defineProperty(c.a.Pow.prototype,"value",{get:function(){return this._exp},set:function(t){this._exp=t,this._expScaler.setMap(this._expFunc(this._exp))}}),c.a.Pow.prototype._expFunc=function(t){return function(e){return Math.pow(Math.abs(e),t)}},c.a.Pow.prototype.dispose=function(){return c.a.SignalBase.prototype.dispose.call(this),this._expScaler.dispose(),this._expScaler=null,this};c.a.Pow;c.a.Envelope=function(){var t=c.a.defaults(arguments,["attack","decay","sustain","release"],c.a.Envelope);c.a.AudioNode.call(this),this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this._attackCurve="linear",this._releaseCurve="exponential",this._sig=this.output=new c.a.Signal(0),this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve},c.a.extend(c.a.Envelope,c.a.AudioNode),c.a.Envelope.defaults={attack:.01,decay:.1,sustain:.5,release:1,attackCurve:"linear",decayCurve:"exponential",releaseCurve:"exponential"},Object.defineProperty(c.a.Envelope.prototype,"value",{get:function(){return this.getValueAtTime(this.now())}}),c.a.Envelope.prototype._getCurve=function(t,e){if(c.a.isString(t))return t;if(c.a.isArray(t))for(var n in c.a.Envelope.Type)if(c.a.Envelope.Type[n][e]===t)return n},c.a.Envelope.prototype._setCurve=function(t,e,n){if(c.a.Envelope.Type.hasOwnProperty(n)){var i=c.a.Envelope.Type[n];c.a.isObject(i)?this[t]=i[e]:this[t]=i}else{if(!c.a.isArray(n))throw new Error("Tone.Envelope: invalid curve: "+n);this[t]=n}},Object.defineProperty(c.a.Envelope.prototype,"attackCurve",{get:function(){return this._getCurve(this._attackCurve,"In")},set:function(t){this._setCurve("_attackCurve","In",t)}}),Object.defineProperty(c.a.Envelope.prototype,"releaseCurve",{get:function(){return this._getCurve(this._releaseCurve,"Out")},set:function(t){this._setCurve("_releaseCurve","Out",t)}}),Object.defineProperty(c.a.Envelope.prototype,"decayCurve",{get:function(){return this._decayCurve},set:function(t){if(!["linear","exponential"].includes(t))throw new Error("Tone.Envelope: invalid curve: "+t);this._decayCurve=t}}),c.a.Envelope.prototype.triggerAttack=function(t,e){this.log("triggerAttack",t,e),t=this.toSeconds(t);var n=this.toSeconds(this.attack),i=this.toSeconds(this.decay);e=c.a.defaultArg(e,1);var r=this.getValueAtTime(t);r>0&&(n=(1-r)/(1/n));if(0===n)this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,n,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,n,t);else if(n>0){this._sig.cancelAndHoldAtTime(t);for(var o=this._attackCurve,a=1;a<o.length;a++)if(o[a-1]<=r&&r<=o[a]){(o=this._attackCurve.slice(a))[0]=r;break}this._sig.setValueCurveAtTime(o,t,n,e)}if(i){var s=e*this.sustain,u=t+n;this.log("decay",u),"linear"===this._decayCurve?this._sig.linearRampTo(s,i,u+this.sampleTime):"exponential"===this._decayCurve&&this._sig.exponentialApproachValueAtTime(s,u,i)}return this},c.a.Envelope.prototype.triggerRelease=function(t){this.log("triggerRelease",t),t=this.toSeconds(t);var e=this.getValueAtTime(t);if(e>0){var n=this.toSeconds(this.release);if("linear"===this._releaseCurve)this._sig.linearRampTo(0,n,t);else if("exponential"===this._releaseCurve)this._sig.targetRampTo(0,n,t);else{var i=this._releaseCurve;c.a.isArray(i)&&(this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(i,t,n,e))}}return this},c.a.Envelope.prototype.getValueAtTime=function(t){return this._sig.getValueAtTime(t)},c.a.Envelope.prototype.triggerAttackRelease=function(t,e,n){return e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this},c.a.Envelope.prototype.cancel=function(t){return this._sig.cancelScheduledValues(t),this},c.a.Envelope.prototype.connect=c.a.SignalBase.prototype.connect,function(){var t,e,n=[];for(t=0;t<128;t++)n[t]=Math.sin(t/127*(Math.PI/2));var i=[];for(t=0;t<127;t++){e=t/127;var r=Math.sin(e*(2*Math.PI)*6.4-Math.PI/2)+1;i[t]=r/10+.83*e}i[127]=1;var o=[];for(t=0;t<128;t++)o[t]=Math.ceil(t/127*5)/5;var a=[];for(t=0;t<128;t++)e=t/127,a[t]=.5*(1-Math.cos(Math.PI*e));var s,u=[];for(t=0;t<128;t++){e=t/127;var l=4*Math.pow(e,3)+.2,h=Math.cos(l*Math.PI*2*e);u[t]=Math.abs(h*(1-e))}function p(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=1-t[n];return e}c.a.Envelope.Type={linear:"linear",exponential:"exponential",bounce:{In:p(u),Out:u},cosine:{In:n,Out:(s=n,s.slice(0).reverse())},step:{In:o,Out:p(o)},ripple:{In:i,Out:p(i)},sine:{In:a,Out:p(a)}}}(),c.a.Envelope.prototype.dispose=function(){return c.a.AudioNode.prototype.dispose.call(this),this._sig.dispose(),this._sig=null,this._attackCurve=null,this._releaseCurve=null,this};c.a.Envelope;c.a.AmplitudeEnvelope=function(){c.a.Envelope.apply(this,arguments),this.input=this.output=new c.a.Gain,this._sig.connect(this.output.gain)},c.a.extend(c.a.AmplitudeEnvelope,c.a.Envelope),c.a.AmplitudeEnvelope.prototype.dispose=function(){return c.a.Envelope.prototype.dispose.call(this),this};c.a.AmplitudeEnvelope;function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var b=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.notes=new Map,this.players=t.getTonePlayers(),this.loadedFiles=[]}var e,n,u;return e=t,u=[{key:"getTonePlayers",value:function(){return new f}},{key:"normalizeSet",value:function(t,e){if("#"===e){var n=r.a.sharpClassNotes.indexOf(t);t=r.a.flatClassNotes[n]}var i=r.a.flatClassNotes.indexOf(t);return r.a.flatClassNotes[i]}},{key:"getKey",value:function(e){var n=e.pitchClass,i=e.octave,r=e.classSet;return"".concat(t.normalizeSet(n,r)).concat(i)}},{key:"normalizeNoteStr",value:function(t){return Object(a.b)(t)}},{key:"notePipeline",value:function(e){if(Object(s.h)(e),(e=t.normalizeNoteStr(e)).includes("#")){var n=t.normalizeSet(e.slice(0,2),"#"),i=e[e.length-1];e="".concat(n).concat(i)}return e}},{key:"name",get:function(){throw new Error("Not implemented for this instrument yet")}},{key:"server",get:function(){return i.a.get("path")}},{key:"instrumentPath",get:function(){return i.a.get(this.name)}}],(n=[{key:"init",value:function(t,e){var n=this;return Object.entries(Object(a.i)(t,e)).forEach(function(t){var e=_(t,2),i=e[0],r=e[1],a=r.pitchClass,s=r.octave,u=new o.a(a,s);n.notes.set(i,u)}),this}},{key:"generatePath",value:function(t){throw new Error("Not implemented for this instrument yet")}},{key:"setPlayer",value:function(t,e){var n=this;if("string"==typeof e)this.players.add(t,e,function(){n.loadedFiles.push(t)}).toMaster();else{this.players.add(t,e);var i=this.players.get(t);i.fadeIn=.1,i.fadeOut=.5,i.toMaster(),this.loadedFiles.push(t)}}},{key:"getPlayer",value:function(t){return this.players.get(t)}},{key:"note",value:function(e){return this.notes.get(t.normalizeNoteStr(e))}},{key:"hasNote",value:function(t){return this.notes.has(t)}},{key:"play",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"3",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.notePipeline(e);if(!this.loadedFiles.includes(r))throw new Error("File was not loaded!");var o=this.players.get(r);return o.start(i+.1).stop("+".concat(n)),!0}},{key:"loadFile",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=t.notePipeline(e);if(!this.loadedFiles.includes(i)){var r=this.notes.get(i);if(!r)throw new Error("This note does not exist in the instrument");return n=n||this.generatePath(r),this.setPlayer(i,n),!0}return!1}},{key:"getBuffer",value:function(e){var n=t.notePipeline(e);return this.players.get(n).buffer}},{key:"toString",value:function(){return""}}])&&g(e.prototype,n),u&&g(e,u),t}();function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function k(t,e){return!e||"object"!==T(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A(t,e){return(A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.assign(b.prototype,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(n,!0).forEach(function(e){v(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},h));var O=function(t){function e(t,n,i){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=k(this,w(e).call(this))).cordNumber=i,r.init(t,n),r}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A(t,e)}(e,b),n=e,r=[{key:"name",get:function(){return"Cord"}}],(i=[{key:"generatePath",value:function(t){var n=b.normalizeSet(t.pitchClass,t.classSet),i="".concat(n).concat(t.octave);return"".concat(b.server).concat(e.instrumentPath,"/").concat(this.cordNumber,"/").concat(i,".mp3")}},{key:"fret",value:function(t){return Array.from(this.notes.keys())[t]}},{key:"toString",value:function(){return"cord"}}])&&S(n.prototype,i),r&&S(n,r),e}();function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function P(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function E(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var j=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._cords=[new O("E4",19,1),new O("B3",16,2),new O("G3",15,3),new O("D3",16,4),new O("A2",16,5),new O("E2",16,6)]}var e,n,i;return e=t,(n=[{key:"playCord",value:function(t,e,n){this.cords[t].play(e,n)}},{key:"playMultiple",value:function(t,e){var n=this;Object.entries(t).forEach(function(t){var i=C(t,2),r=i[0],o=i[1];n.playCord(r,o,e)})}},{key:"playHelper",value:function(t,e,n){e=b.notePipeline(e);for(var i=0;i<this.cords.length;++i)if(this.cords[i].hasNote(e))return this.cords[i][t](e,n);return!1}},{key:"loadFile",value:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=0;i<this.cords.length;++i)this.cords[i].hasNote(e)&&this.cords[i].loadFile(e,n)}},{key:"play",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"100";return arguments.length>2&&arguments[2],this.playHelper("play",t,e)}},{key:"getGain",value:function(){return c.a.context.createGain()}},{key:"strum",value:function(t,e){var n=this;t.forEach(function(t,i){if("x"!==t){i=5-i;var r=n.cords[i].fret(t);n.playCord(i.toString(),r,e)}})}},{key:"toString",value:function(){return"guitar"}},{key:"cords",get:function(){return this._cords}}])&&E(e.prototype,n),i&&E(e,i),t}();function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function N(t,e){return!e||"object"!==B(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function R(t,e){return(R=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.assign(j.prototype,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(n,!0).forEach(function(e){P(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},h));var D=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"A0",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:87;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=N(this,I(e).call(this))).init(n,i),t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&R(t,e)}(e,b),n=e,r=[{key:"name",get:function(){return"Piano"}}],(i=[{key:"generatePath",value:function(t){var n=b.normalizeSet(t.pitchClass,t.classSet),i="".concat(n).concat(t.octave);return"".concat(b.server).concat(e.instrumentPath,"/").concat(i,".mp3")}},{key:"toString",value:function(){return"piano"}}])&&M(n.prototype,i),r&&M(n,r),e}();function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function U(t,e){return!e||"object"!==F(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function L(t,e){return(L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var G=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=U(this,q(e).call(this))).notes=null,t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L(t,e)}(e,b),n=e,r=[{key:"name",get:function(){return"Drumset"}}],(i=[{key:"generatePath",value:function(t){return"".concat(b.server).concat(e.instrumentPath,"/").concat(t,".mp3")}},{key:"getPlayer",value:function(t){return this.players.get(t)}},{key:"loadFile",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return!this.loadedFiles.includes(t)&&(e=e||this.generatePath(t),this.setPlayer(t,e),!0)}},{key:"play",value:function(t){this.players.has(t)&&this.getPlayer(t).start()}},{key:"getBuffer",value:function(t){return this.players.get(t).buffer}},{key:"toString",value:function(){return"drumset"}}])&&V(n.prototype,i),r&&V(n,r),e}();n.d(e,"Instrument",function(){return b}),n.d(e,"Cord",function(){return O}),n.d(e,"Guitar",function(){return j}),n.d(e,"Piano",function(){return D}),n.d(e,"Drumset",function(){return G})},function(t,e,n){"use strict";n.r(e);var i=n(3),r=n(1),o=n(2);function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:64;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.attributes={maxDuration:e,duration:"4n",data:[{notes:new Set,duration:"4n"}]}}var e,n,s;return e=t,(n=[{key:"clone",value:function(){return this.transpose(0)}},{key:"durationLeft",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data.length;return this.maxDuration-this.data.slice(0,t).reduce(function(t,e){return e.notes.size?t+r.a.noteDurations()[e.duration]:t+0},0)}},{key:"initNext",value:function(t){this.durationLeft(this.data.length)>0&&(this.data[t]={notes:new Set,duration:this.duration})}},{key:"validateInsertion",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.duration;return!(t>this.data.length||r.a.noteDurations()[e]>this.durationLeft(t)+e)}},{key:"addNote",value:function(t,e){var n=t.note,r=t.duration;return this.duration=r,Object(i.f)(n)&&(n=Object(i.b)(n)),!!this.validateInsertion(e+1)&&(this.data[e].notes.add(n),this.data[e].duration=this.duration,this.initNext(e+1),!0)}},{key:"addNotes",value:function(t,e){var n=this,i=t.notes,r=t.duration;return Object(o.d)(i),i.every(function(t){return n.addNote({note:t,duration:r},e)})}},{key:"addChord",value:function(t,e){var n=t.notes,i=t.name,r=t.duration;return!(!i||!this.validateInsertion(e+1))&&(this.data[e].name=i,this.addNotes({notes:n,duration:r},e))}},{key:"deleteNote",value:function(t,e){return this.data[e].notes.delete(Object(i.b)(t))}},{key:"deleteNotes",value:function(t,e){var n=this;return Object(o.d)(t),t.every(function(t){return n.deleteNote(t,e)})}},{key:"deleteMember",value:function(t){return!!this.data[t]&&(this.data.splice(t,1),0!==this.data[this.data.length-1].notes.size&&this.initNext(this.data.length),!0)}},{key:"isFull",value:function(t){return!(r.a.noteDurations()[t]<=this.durationLeft())}},{key:"transpose",value:function(e){var n=new t(this.maxDuration);return this.data.forEach(function(t,r){t.notes.forEach(function(o){n.addNote({note:Object(i.o)(o,e),duration:t.duration},r)})}),n}},{key:"clear",value:function(){return this.data.length=0,this.initNext(0),!0}},{key:"data",get:function(){return this.attributes.data}},{key:"duration",get:function(){return this.attributes.duration},set:function(t){Object.keys(r.a.noteDurations()).includes(t)&&(this.attributes.duration=t)}},{key:"maxDuration",get:function(){return this.attributes.maxDuration}}])&&a(e.prototype,n),s&&a(e,s),t}();function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.bpm,i=void 0===n?100:n,r=e.timeSignature,o=void 0===r?[4,4]:r,a=e.name,u=void 0===a?"my_score":a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.setTimeSignature(o),this.attributes={name:u,bpm:i,duration:"4n",voices:[[new s(this.measureSize)]]}}var e,n,i;return e=t,i=[{key:"getMeasureSize",value:function(t){if(!Array.isArray(t))throw new Error("time signature must be an array, e.g [4, 4]");return t[0]/t[1]*4*r.a.noteDurations()["".concat(t[1],"n")]*t[1]/4}}],(n=[{key:"setTimeSignature",value:function(e){this.measureSize=t.getMeasureSize(e),this.timeSignature=e}},{key:"setMeasureDuration",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!!this.getMeasure(t,e)&&(this.getMeasure(t,e).duration=this.duration,!0)}},{key:"getVoice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return!!this.attributes.voices[t]&&this.attributes.voices[t]}},{key:"addVoice",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=e||[new s],this.voices.splice(t,0,e)}},{key:"deleteVoice",value:function(t){if(this.voices.length>1&&this.voices[t])return this.voices.splice(t,1);throw new Error("This score does not have a ${index} voice")}},{key:"getMeasure",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.voices[e][t]}},{key:"addMeasure",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;void 0===t&&(t=this.getVoice(n).length),e=i&&i instanceof s?i:new s(this.measureSize),this.getVoice(n).splice(t,0,e)}},{key:"addNote",value:function(t,e,n){var i=t.note,r=t.duration,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.addOperation("addNote",{note:i,duration:r},e,n,o)}},{key:"addNotes",value:function(t,e,n){var i=t.notes,r=t.duration,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.addOperation("addNotes",{notes:i,duration:r},e,n,o)}},{key:"addChord",value:function(t,e,n){var i=t.notes,r=t.name,o=t.duration,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.addOperation("addChord",{notes:i,name:r,duration:o},e,n,a)}},{key:"addOperation",value:function(t,e,n,i,r){var o=this.getMeasure(i,r);return!!o&&o[t](e,n)}},{key:"deleteNote",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.deleteOperation("deleteNote",t,e,n,i)}},{key:"deleteNotes",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.deleteOperation("deleteNotes",t,e,n,i)}},{key:"deleteOperation",value:function(t,e,n,i,r){return!!this.getMeasure(i,r)&&this.getMeasure(i,r)[t](e,n)}},{key:"deleteMember",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return!!this.getMeasure(e,n)&&this.getMeasure(e,n).deleteMember(t)}},{key:"clearMeasure",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!!this.getMeasure(t,e)&&this.getMeasure(t,e).clear()}},{key:"deleteMeasure",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!!this.getMeasure(t,e)&&this.voices[e].splice(t,1)}},{key:"cloneMeasure",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.getMeasure(t,e)){var n=this.getMeasure(t,e).clone();return this.voices[e].splice(t,0,n),!0}return!1}},{key:"transpose",value:function(t,e){this.voices[e]=this.voices[e].map(function(e){return e.transpose(t)})}},{key:"duration",get:function(){return this.attributes.duration},set:function(t){o.a.validate(t),this.attributes.duration=t}},{key:"name",get:function(){return this.attributes.name},set:function(t){this.attributes.name=t}},{key:"bpm",get:function(){return this.attributes.bpm},set:function(t){"number"==typeof t&&(this.attributes.bpm=t)}},{key:"voices",get:function(){return this.attributes.voices}}])&&u(e.prototype,n),i&&u(e,i),t}();function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(n,!0).forEach(function(e){p(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"measureToObject",value:function(t){var e=this,n=t.data.map(function(t){return e.notesToObject(t)});return{maxDuration:t.maxDuration,duration:t.duration,data:n}}},{key:"notesToObject",value:function(t){var e={notes:Array.from(t.notes),duration:t.duration};return t.name&&(e.name=t.name),e}},{key:"objectToMeasure",value:function(t){var e=new s(t.maxDuration);return e.duration=t.duration,t.data.forEach(function(t,n){t.name?e.addChord(h({},t),n):e.addNotes(h({},t),n)}),e}},{key:"scoreToObject",value:function(t){var e=this,n=t.voices.map(function(t){return t.map(function(t){return e.measureToObject(t)})});return{name:t.name,timeSignature:t.timeSignature,bpm:t.bpm,voices:n}}},{key:"objectToScore",value:function(t){var e=this,n=new c({timeSignature:t.timeSignature,bpm:t.bpm,name:t.name});return t.voices.forEach(function(t,i){t.forEach(function(t,r){t.data[0].notes.length&&n.addMeasure(r,i,e.objectToMeasure(t))})}),n}}],(n=null)&&f(e.prototype,n),i&&f(e,i),t}();n.d(e,"Measure",function(){return s}),n.d(e,"Score",function(){return c}),n.d(e,"ScoreHandler",function(){return d})},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e);var i=n(11),r=n(3),o=n(5),a=n(28),s=n(29),u=n(2),c=n(1),l=n(26),h=n(0);n(12);h.a.Draw=function(){h.a.call(this),this._events=new h.a.Timeline,this.expiration=.25,this.anticipation=.008,this._boundDrawLoop=this._drawLoop.bind(this)},h.a.extend(h.a.Draw),h.a.Draw.prototype.schedule=function(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&requestAnimationFrame(this._boundDrawLoop),this},h.a.Draw.prototype.cancel=function(t){return this._events.cancel(this.toSeconds(t)),this},h.a.Draw.prototype._drawLoop=function(){for(var t=h.a.context.currentTime;this._events.length&&this._events.peek().time-this.anticipation<=t;){var e=this._events.shift();t-e.time<=this.expiration&&e.callback()}this._events.length>0&&requestAnimationFrame(this._boundDrawLoop)},h.a.Draw=new h.a.Draw;var p=h.a.Draw;function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resetPosition()}var e,n,i;return e=t,(n=[{key:"init",value:function(){return this.transport=l.a,this.bpm=120,this.transport.timeSignature=4,this.transport.loop=!0,this._sustain=!0,this}},{key:"resetPosition",value:function(){this.position={voices:null,beat:null,position:null}}},{key:"setScore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t&&e&&(this.bpm=t.bpm,this.transport.timeSignature=t.timeSignature),this.score=t,this.clear(),this}},{key:"setInstruments",value:function(t){return this.instruments=t,this}},{key:"addInstrument",value:function(t){return this.instruments.push(t),this}},{key:"addMetronome",value:function(t,e){return this.metronome={instrument:t,active:!1,sound:e,id:null},this}},{key:"startMetronome",value:function(){var t=this;return this.metronome.isActive=!0,this.metronome.id=this.transport.scheduleRepeat(function(e){t.metronome.instrument.play(t.metronome.sound)},"4n","0"),this}},{key:"stopMetronome",value:function(){return this.metronome.isActive=!1,this.transport.clear(this.metronome.id),this}},{key:"toggleMetronome",value:function(){return this.metronome.isActive?this.stopMetronome():this.startMetronome()}},{key:"scheduleVoices",value:function(){this.transport.loopEnd=this.score.voices[0].length+"m";for(var t=[],e=0;e<this.score.voices.length;++e)t.push({measure:null,noteSet:null}),this.scheduleMeasures(e);return this.position.voices=t,this}},{key:"scheduleMeasures",value:function(t){var e=this;this.score.getVoice(t).forEach(function(n,i){e.scheduleNotes(i,t)})}},{key:"scheduleNotes",value:function(t,e){var n=this,i=0;this.score.voices[e][t].data.forEach(function(r,o){r.notes.forEach(function(a){n.transport.schedule(function(i){if(p.schedule(function(){n.position.voices[0].measure!==t&&(n.position.voices[e].measure=t),n.position.voices[e].noteSet=o},i),"R"!==a){var s=n.sustain?"10":r.duration;n.instruments[e].play(a,s,i)}},"".concat(t,":0:").concat(i))}),i+=c.a.noteDurations()[r.duration]/4})}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0.3";"stopped"===this.transport.state?this.start(t,e):this.stop()}},{key:"start",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0.3";"running"!==h.a.context.state&&h.a.context.resume(),this.metronome.isActive&&this.startMetronome(),this.transport.scheduleRepeat(function(e){t.position.currentTime=t.transport.getSecondsAtTime(),t.position.beat++,t.position.beat===t.score.measureSize/16+1&&(t.position.beat=1)},"4n","0"),this.transport.start("+".concat(n),e)}},{key:"stop",value:function(){return this.transport.stop(),this.resetPosition(),this}},{key:"clear",value:function(){return this.transport.cancel(),this}},{key:"beat",get:function(){return this.position.beat}},{key:"currentTime",get:function(){return this.position.currentTime}},{key:"sustain",get:function(){return this._sustain},set:function(t){this._sustain=t}},{key:"bpm",set:function(t){this.transport.bpm.value=t,this.score&&(this.score.bpm=t)},get:function(){return this.transport.bpm.value}},{key:"timeSignature",set:function(t){this.score.setTimeSignature(t),this.setScore(this.score)}},{key:"loopStart",set:function(t){this.transport.loopStart=t}},{key:"state",get:function(){return this.transport.state}}])&&f(e.prototype,n),i&&f(e,i),t}();n.d(e,"firstToUpper",function(){return r.b}),n.d(e,"twoDigitFormat",function(){return r.p}),n.d(e,"switchMembers",function(){return r.n}),n.d(e,"rearrangeArray",function(){return r.m}),n.d(e,"pitchClassesToNotes",function(){return r.j}),n.d(e,"pitchClassesToPianoChordNotes",function(){return r.k}),n.d(e,"calculateInterval",function(){return r.a}),n.d(e,"noteToObject",function(){return r.h}),n.d(e,"isRest",function(){return r.g}),n.d(e,"isRawNote",function(){return r.f}),n.d(e,"transposeRawNote",function(){return r.o}),n.d(e,"notesInRange",function(){return r.i}),n.d(e,"getNoteDuration",function(){return r.e}),n.d(e,"freqFromPitch",function(){return r.c}),n.d(e,"realNumberFromFreq",function(){return r.l}),n.d(e,"freqFromRealNumber",function(){return r.d}),n.d(e,"PitchClass",function(){return o.PitchClass}),n.d(e,"Note",function(){return o.Note}),n.d(e,"MusicalPattern",function(){return o.MusicalPattern}),n.d(e,"Chord",function(){return o.Chord}),n.d(e,"Scale",function(){return o.Scale}),n.d(e,"GuitarChordPattern",function(){return o.GuitarChordPattern}),n.d(e,"Instrument",function(){return a.Instrument}),n.d(e,"Cord",function(){return a.Cord}),n.d(e,"Guitar",function(){return a.Guitar}),n.d(e,"Piano",function(){return a.Piano}),n.d(e,"Drumset",function(){return a.Drumset}),n.d(e,"Measure",function(){return s.Measure}),n.d(e,"Score",function(){return s.Score}),n.d(e,"ScoreHandler",function(){return s.ScoreHandler}),n.d(e,"DurationRule",function(){return u.a}),n.d(e,"PatternRule",function(){return u.b}),n.d(e,"PitchClassRule",function(){return u.c}),n.d(e,"validateArray",function(){return u.d}),n.d(e,"validateInstance",function(){return u.e}),n.d(e,"validateNumber",function(){return u.f}),n.d(e,"validateRawNote",function(){return u.h}),n.d(e,"validatePitchClasses",function(){return u.g}),n.d(e,"MusicTheoryStructures",function(){return c.a}),n.d(e,"ScorePlayer",function(){return d}),n.d(e,"lib",function(){return i.a}),i.a.get("tone").Buffer.on("load",function(){i.a.set("ready",function(){return!0})})}])});